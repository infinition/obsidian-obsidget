{
  "id": "mini-plotter",
  "name": "Mini Plotter",
  "description": "Quickly plot mathematical functions and data points.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"plot-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">üìà Plot Studio Pro</h4>\n    <div class=\"header-actions\">\n      <button class=\"btn-icon\" id=\"btn-edit-toggle\" title=\"Toggle Edit Mode\">‚öôÔ∏è</button>\n      <button class=\"btn-icon\" id=\"btn-clear\" title=\"Clear Data\">üóëÔ∏è</button>\n    </div>\n  </div>\n\n  <div class=\"chart-container\">\n    <svg id=\"sparkline\" viewBox=\"0 0 400 120\" preserveAspectRatio=\"none\">\n      <defs>\n        <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n          <stop offset=\"0%\" stop-color=\"var(--interactive-accent)\" stop-opacity=\"0.3\" />\n          <stop offset=\"100%\" stop-color=\"var(--interactive-accent)\" stop-opacity=\"0\" />\n        </linearGradient>\n      </defs>\n      <path id=\"area-path\" d=\"\" fill=\"url(#gradient)\" />\n      <path id=\"line-path\" d=\"\" fill=\"none\" stroke=\"var(--interactive-accent)\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <g id=\"points-group\"></g>\n    </svg>\n    <div class=\"chart-overlay\" id=\"chart-overlay\">Enter data below to visualize</div>\n  </div>\n\n  <div class=\"input-section\">\n    <div class=\"input-group\">\n      <label>DATA POINTS (COMMA SEPARATED)</label>\n      <textarea id=\"data-input\" placeholder=\"Ex: 10, 25, 15, 40, 35, 50, 45, 60\" spellcheck=\"false\"></textarea>\n    </div>\n  </div>\n\n  <div class=\"stats-grid\">\n    <div class=\"stat-card\">\n      <span class=\"stat-label\">MIN</span>\n      <span class=\"stat-value\" id=\"stat-min\">-</span>\n    </div>\n    <div class=\"stat-card\">\n      <span class=\"stat-label\">MAX</span>\n      <span class=\"stat-value\" id=\"stat-max\">-</span>\n    </div>\n    <div class=\"stat-card\">\n      <span class=\"stat-label\">AVG</span>\n      <span class=\"stat-value\" id=\"stat-avg\">-</span>\n    </div>\n    <div class=\"stat-card\">\n      <span class=\"stat-label\">COUNT</span>\n      <span class=\"stat-value\" id=\"stat-count\">0</span>\n    </div>\n  </div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.plot-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.btn-icon {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n.btn-icon:hover { background: var(--background-modifier-hover); }\n\n.chart-container {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 16px;\n    height: 160px;\n    position: relative;\n    overflow: hidden;\n    padding: 10px 0;\n}\n\nsvg {\n    width: 100%;\n    height: 100%;\n    display: block;\n}\n\n.chart-overlay {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    font-weight: 600;\n    pointer-events: none;\n    text-align: center;\n    width: 80%;\n}\n\n.input-section {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.input-group {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n\n.input-group label {\n    font-size: 0.6rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    letter-spacing: 0.05em;\n}\n\ntextarea {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    padding: 12px;\n    border-radius: 12px;\n    font-size: 0.9rem;\n    font-family: var(--font-monospace);\n    min-height: 80px;\n    resize: vertical;\n    outline: none;\n    transition: border-color 0.2s;\n}\ntextarea:focus {\n    border-color: var(--interactive-accent);\n}\n\n.stats-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n}\n\n.stat-card {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 12px;\n    padding: 10px 6px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 4px;\n}\n\n.stat-label {\n    font-size: 0.55rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    text-transform: uppercase;\n}\n\n.stat-value {\n    font-size: 0.9rem;\n    font-weight: 700;\n    color: var(--text-normal);\n}\n\n.hidden { display: none !important; }",
  "js": "const { root, saveState, getState } = api;\n\nconst COLORS = [\n    '#0ea5e9', // Blue\n    '#10b981', // Green\n    '#f59e0b', // Amber\n    '#ef4444', // Red\n    '#8b5cf6', // Violet\n    '#ec4899'  // Pink\n];\n\nlet state = {\n    data: '',\n    isEditing: true\n};\n\nfunction draw() {\n    const input = root.getElementById('data-input');\n    const overlay = root.getElementById('chart-overlay');\n    const lineGroup = root.getElementById('line-path').parentElement;\n    const pointsGroup = root.getElementById('points-group');\n    const areaPath = root.getElementById('area-path');\n\n    // Clear previous lines\n    const existingLines = lineGroup.querySelectorAll('.dynamic-line');\n    existingLines.forEach(l => l.remove());\n    areaPath.setAttribute('d', '');\n    pointsGroup.innerHTML = '';\n\n    const lines = state.data.split('\\n')\n        .map(line => line.split(/[\\s,]+/)\n            .map(n => parseFloat(n.trim()))\n            .filter(n => !isNaN(n)))\n        .filter(series => series.length >= 2);\n\n    if (lines.length === 0) {\n        overlay.classList.remove('hidden');\n        updateStats(null);\n        return;\n    }\n\n    overlay.classList.add('hidden');\n\n    // Find global min/max for scaling\n    const allValues = lines.flat();\n    const min = Math.min(...allValues);\n    const max = Math.max(...allValues);\n    const range = max - min || 1;\n    const width = 400;\n    const height = 120;\n    const padding = 15;\n\n    lines.forEach((series, sIdx) => {\n        const color = COLORS[sIdx % COLORS.length];\n        const points = series.map((val, i) => {\n            const x = (i / (series.length - 1)) * width;\n            const y = height - ((val - min) / range) * (height - padding * 2) - padding;\n            return { x, y };\n        });\n\n        const d = `M ${points[0].x},${points[0].y} ` + points.slice(1).map(p => `L ${p.x},${p.y}`).join(' ');\n        \n        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        path.setAttribute('d', d);\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', color);\n        path.setAttribute('stroke-width', '3');\n        path.setAttribute('stroke-linecap', 'round');\n        path.setAttribute('stroke-linejoin', 'round');\n        path.classList.add('dynamic-line');\n        lineGroup.appendChild(path);\n\n        // Area for the first line only for aesthetic\n        if (sIdx === 0) {\n            const areaD = `${d} L ${points[points.length - 1].x},${height} L ${points[0].x},${height} Z`;\n            areaPath.setAttribute('d', areaD);\n            root.host.style.setProperty('--interactive-accent', color);\n        }\n\n        // Draw points\n        points.forEach(p => {\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', p.x);\n            circle.setAttribute('cy', p.y);\n            circle.setAttribute('r', '3');\n            circle.setAttribute('fill', 'var(--background-primary)');\n            circle.setAttribute('stroke', color);\n            circle.setAttribute('stroke-width', '2');\n            pointsGroup.appendChild(circle);\n        });\n    });\n\n    updateStats(allValues);\n}\n\nfunction updateStats(data) {\n    const minEl = root.getElementById('stat-min');\n    const maxEl = root.getElementById('stat-max');\n    const avgEl = root.getElementById('stat-avg');\n    const countEl = root.getElementById('stat-count');\n\n    if (!data || data.length === 0) {\n        minEl.innerText = '-';\n        maxEl.innerText = '-';\n        avgEl.innerText = '-';\n        countEl.innerText = '0';\n        return;\n    }\n\n    const min = Math.min(...data);\n    const max = Math.max(...data);\n    const avg = data.reduce((a, b) => a + b, 0) / data.length;\n\n    minEl.innerText = min.toLocaleString();\n    maxEl.innerText = max.toLocaleString();\n    avgEl.innerText = avg.toFixed(1);\n    countEl.innerText = data.length;\n}\n\nfunction toggleEdit() {\n    state.isEditing = !state.isEditing;\n    const inputSection = root.querySelector('.input-section');\n    const editBtn = root.getElementById('btn-edit-toggle');\n    \n    if (state.isEditing) {\n        inputSection.classList.remove('hidden');\n        editBtn.classList.add('active');\n    } else {\n        inputSection.classList.add('hidden');\n        editBtn.classList.remove('active');\n    }\n    save();\n}\n\nfunction clearData() {\n    state.data = '';\n    root.getElementById('data-input').value = '';\n    draw();\n    save();\n}\n\nfunction save() {\n    saveState(state);\n}\n\nasync function init() {\n    const input = root.getElementById('data-input');\n    const saved = await getState();\n    \n    if (saved) {\n        if (typeof saved === 'string') state.data = saved;\n        else Object.assign(state, saved);\n    }\n\n    input.value = state.data;\n    \n    // Initial UI state\n    const inputSection = root.querySelector('.input-section');\n    const editBtn = root.getElementById('btn-edit-toggle');\n    if (state.isEditing) {\n        inputSection.classList.remove('hidden');\n        editBtn.classList.add('active');\n    } else {\n        inputSection.classList.add('hidden');\n        editBtn.classList.remove('active');\n    }\n\n    input.oninput = (e) => {\n        state.data = e.target.value;\n        draw();\n    };\n\n    input.onblur = () => {\n        save();\n    };\n\n    root.getElementById('btn-clear').onclick = clearData;\n    root.getElementById('btn-edit-toggle').onclick = toggleEdit;\n\n    draw();\n}\n\ninit();",
  "tags": [
    "mathematics",
    "chart",
    "visualization",
    "premium",
    "plotter"
  ]
}