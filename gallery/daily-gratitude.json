{
  "id": "daily-gratitude",
  "name": "Gratitude Studio",
  "description": "Practice daily gratitude with this simple journal widget.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"gratitude-widget\">\n  <div class=\"widget-header\">\n    <div class=\"header-left\">\n      <h4 class=\"widget-title\">âœ¨ Gratitude Studio</h4>\n      <div class=\"streak-badge\" id=\"streak-display\">ðŸ”¥ 0 day streak</div>\n    </div>\n    <button class=\"btn-icon\" id=\"btn-history\" title=\"View Memories\">ðŸ“œ</button>\n  </div>\n\n  <div class=\"jar-container\" id=\"jar\">\n    <div class=\"jar-bg-animated\"></div>\n    <div class=\"bubbles-area\" id=\"bubbles-container\"></div>\n    <div class=\"empty-state\" id=\"empty-msg\">Your jar is waiting for<br>a beautiful memory...</div>\n  </div>\n\n  <div class=\"input-section\">\n    <div class=\"input-wrapper\">\n      <input type=\"text\" id=\"grat-input\" placeholder=\"Today, I am grateful for...\" maxlength=\"40\">\n      <button id=\"btn-add\" class=\"add-btn\">âœ¨</button>\n    </div>\n  </div>\n\n  <div class=\"history-drawer\" id=\"history-drawer\">\n    <div class=\"drawer-blur\"></div>\n    <div class=\"drawer-content\">\n      <div class=\"drawer-header\">\n        <span>Memory Lane</span>\n        <button id=\"btn-close-history\" class=\"close-btn\">âœ•</button>\n      </div>\n      <div class=\"history-list\" id=\"history-list\"></div>\n      <div class=\"drawer-footer\">\n        <button id=\"btn-clear\" class=\"btn-clear\">Clear All Memories</button>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"toast\" class=\"toast\">Memory Saved!</div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.gratitude-widget {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    color: var(--text-accent);\n}\n\n.streak-badge {\n    font-size: 0.65rem;\n    font-weight: 600;\n    color: var(--text-on-accent);\n    background: var(--interactive-accent);\n    padding: 2px 10px;\n    border-radius: 12px;\n    margin-top: 4px;\n    display: inline-block;\n}\n\n.btn-icon {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    width: 34px;\n    height: 34px;\n    border-radius: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1rem;\n    color: var(--text-muted);\n    transition: all 0.2s ease;\n}\n.btn-icon:hover { background: var(--background-modifier-hover); color: var(--text-normal); }\n\n.jar-container {\n    height: 300px;\n    background: #0f172a;\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 20px 20px 60px 60px;\n    position: relative;\n    margin-bottom: 1.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    box-shadow: inset 0 4px 30px rgba(0,0,0,0.5);\n}\n\n.jar-bg-animated {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);\n    background-size: 400% 400%;\n    animation: gradientBG 15s ease infinite;\n    opacity: 0.6;\n    z-index: 0;\n}\n\n@keyframes gradientBG {\n    0% { background-position: 0% 50%; }\n    50% { background-position: 100% 50%; }\n    100% { background-position: 0% 50%; }\n}\n\n.empty-state {\n    text-align: center;\n    font-size: 0.8rem;\n    color: #fff;\n    font-style: italic;\n    z-index: 1;\n    pointer-events: none;\n    opacity: 0.8;\n    text-shadow: 0 2px 4px rgba(0,0,0,0.3);\n}\n\n.bubbles-area {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    z-index: 2;\n}\n\n.bubble {\n    position: absolute;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    padding: 12px;\n    font-size: 0.65rem;\n    font-weight: 800;\n    box-shadow: 0 10px 25px rgba(0,0,0,0.3), inset 0 0 20px rgba(255,255,255,0.4);\n    border: 1px solid rgba(255,255,255,0.3);\n    word-break: break-word;\n    line-height: 1.1;\n    cursor: pointer;\n    will-change: transform;\n    user-select: none;\n    color: white;\n    text-shadow: 0 1px 2px rgba(0,0,0,0.5);\n    background-size: 200% 200%;\n    animation: bubbleGradient 3s ease infinite;\n}\n\n@keyframes bubbleGradient {\n    0% { background-position: 0% 50%; }\n    50% { background-position: 100% 50%; }\n    100% { background-position: 0% 50%; }\n}\n\n.input-section {\n    position: relative;\n    z-index: 10;\n}\n\n.input-wrapper {\n    display: flex;\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 14px;\n    padding: 4px;\n}\n.input-wrapper:focus-within { border-color: var(--interactive-accent); }\n\n#grat-input {\n    flex: 1;\n    border: none;\n    background: none;\n    padding: 8px 12px;\n    font-size: 0.9rem;\n    color: var(--text-normal);\n    outline: none;\n}\n\n.add-btn {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    width: 38px;\n    height: 38px;\n    border-radius: 10px;\n    font-size: 1.1rem;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.history-drawer {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    z-index: 100;\n    visibility: hidden;\n}\n.history-drawer.open { visibility: visible; }\n\n.drawer-blur {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    background: rgba(0, 0, 0, 0.4);\n    backdrop-filter: blur(8px);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n}\n.history-drawer.open .drawer-blur { opacity: 1; }\n\n.drawer-content {\n    position: absolute;\n    bottom: 0; left: 0; width: 100%; height: 85%;\n    background: var(--background-primary);\n    border-radius: 24px 24px 0 0;\n    padding: 1.5rem;\n    transform: translateY(100%);\n    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    display: flex;\n    flex-direction: column;\n    border-top: 1px solid var(--background-modifier-border);\n}\n.history-drawer.open .drawer-content { transform: translateY(0); }\n\n.drawer-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n}\n.drawer-header span { font-size: 1rem; font-weight: 700; color: var(--text-accent); }\n\n.close-btn {\n    background: var(--background-secondary);\n    border: none;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--text-muted);\n}\n\n.history-list {\n    flex: 1;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.history-day {\n    background: var(--background-secondary);\n    border-radius: 12px;\n    padding: 12px;\n    border: 1px solid var(--background-modifier-border);\n}\n\n.day-date {\n    font-size: 0.65rem;\n    font-weight: 700;\n    color: var(--text-accent);\n    text-transform: uppercase;\n    margin-bottom: 4px;\n    display: block;\n}\n.day-items {\n    font-size: 0.8rem;\n    line-height: 1.5;\n    color: var(--text-normal);\n}\n\n.drawer-footer {\n    padding-top: 1rem;\n    text-align: center;\n}\n\n.btn-clear {\n    background: none;\n    border: none;\n    color: var(--text-error);\n    font-size: 0.7rem;\n    font-weight: 600;\n    cursor: pointer;\n    opacity: 0.7;\n}\n\n.toast {\n    position: fixed;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%) translateY(100px);\n    background: var(--interactive-success);\n    color: var(--text-on-accent);\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    transition: transform 0.3s ease;\n    z-index: 200;\n}\n.toast.show { transform: translateX(-50%) translateY(0); }",
  "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    today: [],\n    history: [],\n    streak: 0,\n    lastDate: null\n};\n\nconst BUBBLE_GRADIENTS = [\n    'linear-gradient(45deg, #f093fb 0%, #f5576c 100%)',\n    'linear-gradient(45deg, #5ee7df 0%, #b490ca 100%)',\n    'linear-gradient(45deg, #c31432 0%, #240b36 100%)',\n    'linear-gradient(45deg, #0093E9 0%, #80D0C7 100%)',\n    'linear-gradient(45deg, #FBAB7E 0%, #F7CE68 100%)',\n    'linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%)'\n];\n\nlet bubbles = [];\nlet animationId = null;\n\nclass Bubble {\n    constructor(text, i) {\n        this.text = text;\n        this.el = document.createElement('div');\n        this.el.className = 'bubble';\n        this.el.innerText = text;\n        \n        this.el.style.backgroundImage = BUBBLE_GRADIENTS[i % BUBBLE_GRADIENTS.length];\n        \n        this.radius = Math.max(35, Math.min(50, 30 + text.length * 1.2));\n        this.el.style.width = (this.radius * 2) + 'px';\n        this.el.style.height = (this.radius * 2) + 'px';\n        \n        this.x = Math.random() * 100 + 50;\n        this.y = Math.random() * 100 + 50;\n        this.vx = (Math.random() - 0.5) * 1.5;\n        this.vy = (Math.random() - 0.5) * 1.5;\n        \n        this.el.onmouseenter = () => {\n            this.vx += (Math.random() - 0.5) * 4;\n            this.vy += (Math.random() - 0.5) * 4;\n        };\n        \n        this.el.onclick = () => {\n            this.vx *= 2;\n            this.vy *= 2;\n        };\n\n        root.getElementById('bubbles-container').appendChild(this.el);\n    }\n\n    update(width, height) {\n        this.x += this.vx;\n        this.y += this.vy;\n        \n        if (this.x - this.radius < 0) { this.x = this.radius; this.vx *= -1; }\n        else if (this.x + this.radius > width) { this.x = width - this.radius; this.vx *= -1; }\n        \n        if (this.y - this.radius < 0) { this.y = this.radius; this.vy *= -1; }\n        else if (this.y + this.radius > height) { this.y = height - this.radius; this.vy *= -1; }\n        \n        this.vx *= 0.998;\n        this.vy *= 0.998;\n        \n        if (Math.abs(this.vx) < 0.05) this.vx = (Math.random() - 0.5) * 0.3;\n        if (Math.abs(this.vy) < 0.05) this.vy = (Math.random() - 0.5) * 0.3;\n\n        this.el.style.transform = `translate3d(${this.x - this.radius}px, ${this.y - this.radius}px, 0)`;\n    }\n}\n\nfunction animate() {\n    const container = root.getElementById('bubbles-container');\n    if (!container) return;\n    const rect = container.getBoundingClientRect();\n    bubbles.forEach(b => b.update(rect.width, rect.height));\n    animationId = requestAnimationFrame(animate);\n}\n\nfunction showToast() {\n    const toast = root.getElementById('toast');\n    toast.classList.add('show');\n    setTimeout(() => toast.classList.remove('show'), 2000);\n}\n\nfunction updateJar() {\n    const container = root.getElementById('bubbles-container');\n    const emptyMsg = root.getElementById('empty-msg');\n    container.innerHTML = '';\n    bubbles = [];\n    \n    if (state.today.length === 0) {\n        emptyMsg.style.display = 'block';\n    } else {\n        emptyMsg.style.display = 'none';\n        state.today.forEach((text, i) => {\n            bubbles.push(new Bubble(text, i));\n        });\n    }\n}\n\nfunction addGratitude() {\n    const input = root.getElementById('grat-input');\n    const text = input.value.trim();\n    if (text) {\n        state.today.push(text);\n        input.value = '';\n        const todayStr = new Date().toLocaleDateString();\n        if (state.lastDate !== todayStr) {\n            if (state.lastDate) {\n                const last = new Date(state.lastDate);\n                const diff = (new Date() - last) / (1000 * 60 * 60 * 24);\n                if (diff <= 1.5) state.streak++;\n                else state.streak = 1;\n            } else state.streak = 1;\n            state.lastDate = todayStr;\n        }\n        updateJar();\n        updateStreakDisplay();\n        save();\n        showToast();\n    }\n}\n\nfunction updateStreakDisplay() {\n    root.getElementById('streak-display').innerText = `ðŸ”¥ ${state.streak} day streak`;\n}\n\nfunction renderHistory() {\n    const list = root.getElementById('history-list');\n    list.innerHTML = '';\n    const todayStr = new Date().toLocaleDateString();\n    const allHistory = JSON.parse(JSON.stringify(state.history));\n    if (state.today.length > 0) {\n        const existingToday = allHistory.find(h => h.date === todayStr);\n        if (existingToday) existingToday.items = state.today;\n        else allHistory.unshift({ date: todayStr, items: state.today });\n    }\n    if (allHistory.length === 0) {\n        list.innerHTML = '<div style=\"text-align:center;color:var(--text-muted);margin-top:2rem;\">No memories yet...</div>';\n        return;\n    }\n    allHistory.forEach(day => {\n        const div = document.createElement('div');\n        div.className = 'history-day';\n        div.innerHTML = `<span class=\"day-date\">${day.date}</span><div class=\"day-items\">${day.items.join(' â€¢ ')}</div>`;\n        list.appendChild(div);\n    });\n}\n\nfunction save() {\n    const todayStr = new Date().toLocaleDateString();\n    if (state.today.length > 0) {\n        const idx = state.history.findIndex(h => h.date === todayStr);\n        if (idx !== -1) state.history[idx].items = state.today;\n        else state.history.unshift({ date: todayStr, items: state.today });\n    }\n    saveState(state);\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) {\n        state = saved;\n        const todayStr = new Date().toLocaleDateString();\n        if (state.lastDate !== todayStr) state.today = [];\n    }\n    updateJar();\n    updateStreakDisplay();\n    animate();\n    root.getElementById('btn-add').onclick = addGratitude;\n    root.getElementById('grat-input').onkeydown = (e) => { if (e.key === 'Enter') addGratitude(); };\n    const drawer = root.getElementById('history-drawer');\n    root.getElementById('btn-history').onclick = () => { renderHistory(); drawer.classList.add('open'); };\n    root.getElementById('btn-close-history').onclick = () => { drawer.classList.remove('open'); };\n    root.getElementById('btn-clear').onclick = () => {\n        if (confirm('Clear all your beautiful memories?')) {\n            state.history = []; state.today = []; state.streak = 0; state.lastDate = null;\n            updateJar(); updateStreakDisplay(); renderHistory(); save();\n        }\n    };\n}\ninit();",
  "tags": [
    "wellbeing",
    "journal",
    "mindfulness",
    "gratitude",
    "premium"
  ]
}