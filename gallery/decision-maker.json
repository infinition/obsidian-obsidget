{
  "id": "decision-maker",
  "name": "Decision Maker",
  "description": "Let the widget help you make decisions with a random wheel.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"decision-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">ü§î Decision Studio</h4>\n    <button class=\"btn-icon\" id=\"btn-clear\" title=\"Clear All\">üóëÔ∏è</button>\n  </div>\n\n  <div class=\"decision-display\">\n    <div class=\"display-bg\"></div>\n    <div class=\"result-text\" id=\"decision-result\">Ready?</div>\n  </div>\n\n  <div class=\"options-container\">\n    <label class=\"section-label\">Your Options</label>\n    <div class=\"options-list\" id=\"options-list\"></div>\n  </div>\n\n  <div class=\"controls\">\n    <button class=\"btn-secondary\" id=\"btn-add\">+ Add Option</button>\n    <button class=\"btn-primary\" id=\"btn-decide\">DECIDE!</button>\n  </div>\n\n  <div id=\"confetti-container\" class=\"confetti-container\"></div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.decision-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.25rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.btn-icon {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 1rem;\n    opacity: 0.6;\n    transition: opacity 0.2s;\n}\n.btn-icon:hover { opacity: 1; }\n\n.decision-display {\n    height: 100px;\n    background: #0f172a;\n    border-radius: 16px;\n    margin-bottom: 1.5rem;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    border: 1px solid rgba(255,255,255,0.1);\n    box-shadow: inset 0 4px 20px rgba(0,0,0,0.5);\n}\n\n.display-bg {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    background: radial-gradient(circle at center, var(--interactive-accent) 0%, transparent 70%);\n    opacity: 0.2;\n    transition: opacity 0.3s;\n}\n\n.result-text {\n    font-size: 1.5rem;\n    font-weight: 800;\n    color: white;\n    z-index: 1;\n    text-align: center;\n    padding: 0 1rem;\n    text-shadow: 0 0 15px var(--interactive-accent);\n    transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n}\n\n.result-text.spinning {\n    animation: spinText 0.1s infinite linear;\n}\n\n@keyframes spinText {\n    0% { transform: translateY(-10px); opacity: 0.5; }\n    50% { transform: translateY(10px); opacity: 0.5; }\n    100% { transform: translateY(-10px); opacity: 0.5; }\n}\n\n.options-container {\n    margin-bottom: 1.5rem;\n}\n\n.section-label {\n    font-size: 0.65rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 8px;\n}\n\n.options-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    max-height: 200px;\n    overflow-y: auto;\n    padding-right: 4px;\n}\n\n.option-item {\n    display: flex;\n    gap: 8px;\n    animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n    from { opacity: 0; transform: translateX(-10px); }\n    to { opacity: 1; transform: translateX(0); }\n}\n\n.option-item input {\n    flex: 1;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    padding: 10px 14px;\n    border-radius: 12px;\n    font-size: 0.85rem;\n    outline: none;\n    transition: border-color 0.2s;\n}\n.option-item input:focus { border-color: var(--interactive-accent); }\n\n.btn-del {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-error);\n    width: 38px;\n    border-radius: 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.2rem;\n    transition: all 0.2s;\n}\n.btn-del:hover { background: var(--text-error); color: white; border-color: var(--text-error); }\n\n.controls {\n    display: flex;\n    gap: 12px;\n}\n\n.btn-secondary {\n    flex: 1;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    padding: 12px;\n    border-radius: 14px;\n    font-weight: 600;\n    font-size: 0.85rem;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n.btn-secondary:hover { background: var(--background-modifier-hover); }\n\n.btn-primary {\n    flex: 1.5;\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 12px;\n    border-radius: 14px;\n    font-weight: 800;\n    font-size: 0.9rem;\n    cursor: pointer;\n    box-shadow: 0 4px 0 rgba(0,0,0,0.2);\n    transition: all 0.1s;\n}\n.btn-primary:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.2); }\n\n.confetti-container {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    pointer-events: none;\n    z-index: 10;\n}\n\n.confetti {\n    position: absolute;\n    width: 8px; height: 8px;\n    background: var(--interactive-accent);\n    border-radius: 2px;\n    animation: fall 2s linear forwards;\n}\n\n@keyframes fall {\n    to { transform: translateY(300px) rotate(360deg); opacity: 0; }\n}",
  "js": "const { root, saveState, getState } = api;\n\nlet options = ['Yes', 'No'];\nlet isSpinning = false;\n\nfunction render() {\n    const list = root.getElementById('options-list');\n    list.innerHTML = '';\n    options.forEach((opt, idx) => {\n        const div = document.createElement('div');\n        div.className = 'option-item';\n        \n        const input = document.createElement('input');\n        input.type = 'text';\n        input.value = opt;\n        input.placeholder = `Option ${idx + 1}`;\n        \n        // Focus fix: update array on input, but only save on blur\n        input.oninput = (e) => { options[idx] = e.target.value; };\n        input.onblur = () => { save(); };\n        \n        const delBtn = document.createElement('button');\n        delBtn.className = 'btn-del';\n        delBtn.innerHTML = '√ó';\n        delBtn.onclick = () => deleteOption(idx);\n        \n        div.appendChild(input);\n        div.appendChild(delBtn);\n        list.appendChild(div);\n    });\n}\n\nfunction addOption() {\n    options.push('');\n    render();\n    // Focus the new input\n    const inputs = root.querySelectorAll('.option-item input');\n    inputs[inputs.length - 1].focus();\n    save();\n}\n\nfunction deleteOption(idx) {\n    options.splice(idx, 1);\n    render();\n    save();\n}\n\nfunction clearAll() {\n    if (confirm('Clear all options?')) {\n        options = ['', ''];\n        render();\n        save();\n    }\n}\n\nfunction save() {\n    saveState(options);\n}\n\nfunction decide() {\n    if (isSpinning) return;\n    const validOptions = options.filter(o => o.trim() !== '');\n    if (validOptions.length < 2) {\n        alert('Please add at least 2 options!');\n        return;\n    }\n\n    isSpinning = true;\n    const resultBox = root.getElementById('decision-result');\n    const displayBg = root.querySelector('.display-bg');\n    \n    resultBox.classList.add('spinning');\n    displayBg.style.opacity = '0.8';\n\n    let count = 0;\n    const maxCount = 20;\n    const interval = setInterval(() => {\n        resultBox.innerText = validOptions[Math.floor(Math.random() * validOptions.length)];\n        count++;\n        \n        if (count >= maxCount) {\n            clearInterval(interval);\n            finishDecision(validOptions);\n        }\n    }, 80);\n}\n\nfunction finishDecision(validOptions) {\n    const resultBox = root.getElementById('decision-result');\n    const displayBg = root.querySelector('.display-bg');\n    \n    const finalChoice = validOptions[Math.floor(Math.random() * validOptions.length)];\n    resultBox.innerText = finalChoice;\n    resultBox.classList.remove('spinning');\n    resultBox.style.transform = 'scale(1.2)';\n    \n    setTimeout(() => {\n        resultBox.style.transform = 'scale(1)';\n        displayBg.style.opacity = '0.2';\n        isSpinning = false;\n    }, 500);\n\n    createConfetti();\n}\n\nfunction createConfetti() {\n    const container = root.getElementById('confetti-container');\n    for (let i = 0; i < 30; i++) {\n        const c = document.createElement('div');\n        c.className = 'confetti';\n        c.style.left = Math.random() * 100 + '%';\n        c.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;\n        c.style.animationDelay = Math.random() * 0.5 + 's';\n        container.appendChild(c);\n        setTimeout(() => c.remove(), 2500);\n    }\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved && Array.isArray(saved)) options = saved;\n    \n    root.getElementById('btn-add').onclick = addOption;\n    root.getElementById('btn-decide').onclick = decide;\n    root.getElementById('btn-clear').onclick = clearAll;\n    \n    render();\n}\n\ninit();",
  "tags": [
    "productivity",
    "tools",
    "random",
    "decision",
    "premium"
  ]
}