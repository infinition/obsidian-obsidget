{
  "id": "meal-planner",
  "name": "Meal Planner",
  "description": "Plan your weekly meals and track your nutrition.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"meal-widget\">\n  <div class=\"widget-header\">\n    <div class=\"header-main\">\n      <h4 class=\"widget-title\">ü•ó Meal Studio Pro</h4>\n      <div class=\"view-toggle\">\n        <button class=\"btn-toggle active\" id=\"btn-view-day\">DAY</button>\n        <button class=\"btn-toggle\" id=\"btn-view-week\">WEEK</button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"view-container\" id=\"view-day\">\n    <div class=\"day-selector\">\n      <button class=\"day-btn\" data-day=\"0\">MON</button>\n      <button class=\"day-btn\" data-day=\"1\">TUE</button>\n      <button class=\"day-btn\" data-day=\"2\">WED</button>\n      <button class=\"day-btn\" data-day=\"3\">THU</button>\n      <button class=\"day-btn\" data-day=\"4\">FRI</button>\n      <button class=\"day-btn\" data-day=\"5\">SAT</button>\n      <button class=\"day-btn\" data-day=\"6\">SUN</button>\n    </div>\n\n    <div class=\"meal-inputs\">\n      <div class=\"meal-card\" data-type=\"b\">\n        <div class=\"meal-icon\">üç≥</div>\n        <div class=\"meal-content\">\n          <label>BREAKFAST</label>\n          <input type=\"text\" id=\"input-b\" placeholder=\"What's for breakfast?\">\n        </div>\n      </div>\n      <div class=\"meal-card\" data-type=\"l\">\n        <div class=\"meal-icon\">üç±</div>\n        <div class=\"meal-content\">\n          <label>LUNCH</label>\n          <input type=\"text\" id=\"input-l\" placeholder=\"What's for lunch?\">\n        </div>\n      </div>\n      <div class=\"meal-card\" data-type=\"d\">\n        <div class=\"meal-icon\">üçù</div>\n        <div class=\"meal-content\">\n          <label>DINNER</label>\n          <input type=\"text\" id=\"input-d\" placeholder=\"What's for dinner?\">\n        </div>\n      </div>\n    </div>\n\n    <div class=\"day-actions\">\n      <button class=\"btn-clear-day\" id=\"btn-clear-day\">Clear Day</button>\n    </div>\n  </div>\n\n  <div class=\"view-container hidden\" id=\"view-week\">\n    <div class=\"week-grid\" id=\"week-grid\">\n      <!-- Days will be injected here -->\n    </div>\n  </div>\n\n  <div id=\"toast\" class=\"toast\">Saved! ‚ú®</div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.meal-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n    position: relative;\n}\n\n.widget-header {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n.header-main {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.view-toggle {\n    display: flex;\n    background: var(--background-primary);\n    padding: 4px;\n    border-radius: 10px;\n    border: 1px solid var(--background-modifier-border);\n}\n\n.btn-toggle {\n    background: transparent;\n    border: none;\n    color: var(--text-muted);\n    padding: 4px 12px;\n    border-radius: 6px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n.btn-toggle.active {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n}\n\n.view-container {\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n    animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(5px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.day-selector {\n    display: flex;\n    justify-content: space-between;\n    gap: 4px;\n}\n\n.day-btn {\n    flex: 1;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-muted);\n    padding: 8px 0;\n    border-radius: 8px;\n    font-size: 0.65rem;\n    font-weight: 700;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n.day-btn.active {\n    background: var(--background-modifier-hover);\n    color: var(--text-normal);\n    border-color: var(--interactive-accent);\n    transform: translateY(-2px);\n}\n\n.meal-inputs {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.meal-card {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 16px;\n    padding: 12px 16px;\n    transition: all 0.2s;\n}\n.meal-card:focus-within {\n    border-color: var(--interactive-accent);\n    box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.1);\n}\n\n.meal-icon {\n    font-size: 1.5rem;\n}\n\n.meal-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n}\n\n.meal-content label {\n    font-size: 0.6rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    letter-spacing: 0.05em;\n}\n\n.meal-content input {\n    background: transparent;\n    border: none;\n    color: var(--text-normal);\n    font-size: 0.95rem;\n    font-weight: 500;\n    padding: 0;\n    outline: none;\n    width: 100%;\n}\n\n.day-actions {\n    display: flex;\n    justify-content: flex-end;\n}\n\n.btn-clear-day {\n    background: transparent;\n    border: none;\n    color: var(--text-error);\n    font-size: 0.7rem;\n    font-weight: 600;\n    cursor: pointer;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n}\n.btn-clear-day:hover { opacity: 1; }\n\n.week-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n    gap: 10px;\n}\n\n.week-day-card {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 14px;\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n\n.week-day-name {\n    font-size: 0.7rem;\n    font-weight: 800;\n    color: var(--interactive-accent);\n    text-transform: uppercase;\n    border-bottom: 1px solid var(--background-modifier-border);\n    padding-bottom: 4px;\n    margin-bottom: 2px;\n}\n\n.week-meal-item {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    font-size: 0.75rem;\n    color: var(--text-normal);\n}\n\n.week-meal-item span {\n    font-size: 0.8rem;\n    opacity: 0.8;\n}\n\n.week-meal-text {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    opacity: 0.9;\n}\n\n.week-meal-empty {\n    font-size: 0.65rem;\n    color: var(--text-muted);\n    font-style: italic;\n}\n\n.toast {\n    position: absolute;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%) translateY(100px);\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    z-index: 100;\n}\n.toast.show { transform: translateX(-50%) translateY(0); }\n\n.hidden { display: none !important; }",
  "js": "const { root, saveState, getState } = api;\n\nconst DAYS = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];\n\nlet state = {\n    currentDay: 0,\n    view: 'day', // 'day' or 'week'\n    plan: [\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' },\n        { b: '', l: '', d: '' }\n    ]\n};\n\nfunction render() {\n    const viewDay = root.getElementById('view-day');\n    const viewWeek = root.getElementById('view-week');\n    const btnDay = root.getElementById('btn-view-day');\n    const btnWeek = root.getElementById('btn-view-week');\n\n    if (state.view === 'day') {\n        viewDay.classList.remove('hidden');\n        viewWeek.classList.add('hidden');\n        btnDay.classList.add('active');\n        btnWeek.classList.remove('active');\n        renderDayView();\n    } else {\n        viewDay.classList.add('hidden');\n        viewWeek.classList.remove('hidden');\n        btnDay.classList.remove('active');\n        btnWeek.classList.add('active');\n        renderWeekView();\n    }\n}\n\nfunction renderDayView() {\n    const dayBtns = root.querySelectorAll('.day-btn');\n    dayBtns.forEach((btn, idx) => {\n        btn.classList.toggle('active', idx === state.currentDay);\n    });\n\n    const dayPlan = state.plan[state.currentDay];\n    root.getElementById('input-b').value = dayPlan.b;\n    root.getElementById('input-l').value = dayPlan.l;\n    root.getElementById('input-d').value = dayPlan.d;\n}\n\nfunction renderWeekView() {\n    const grid = root.getElementById('week-grid');\n    grid.innerHTML = '';\n\n    state.plan.forEach((day, idx) => {\n        const card = document.createElement('div');\n        card.className = 'week-day-card';\n        \n        let content = `<div class=\"week-day-name\">${DAYS[idx]}</div>`;\n        \n        const meals = [\n            { icon: 'üç≥', text: day.b },\n            { icon: 'üç±', text: day.l },\n            { icon: 'üçù', text: day.d }\n        ];\n\n        let hasAnyMeal = false;\n        meals.forEach(m => {\n            if (m.text) {\n                hasAnyMeal = true;\n                content += `\n                    <div class=\"week-meal-item\">\n                        <span>${m.icon}</span>\n                        <div class=\"week-meal-text\">${m.text}</div>\n                    </div>`;\n            }\n        });\n\n        if (!hasAnyMeal) {\n            content += `<div class=\"week-meal-empty\">No meals planned</div>`;\n        }\n\n        card.innerHTML = content;\n        card.onclick = () => {\n            state.currentDay = idx;\n            state.view = 'day';\n            render();\n        };\n        grid.appendChild(card);\n    });\n}\n\nfunction handleInput(type, val) {\n    state.plan[state.currentDay][type] = val;\n    save();\n}\n\nfunction clearDay() {\n    state.plan[state.currentDay] = { b: '', l: '', d: '' };\n    save();\n    render();\n    showToast('Day cleared! üßπ');\n}\n\nfunction showToast(msg) {\n    const toast = root.getElementById('toast');\n    if (toast) {\n        toast.innerText = msg;\n        toast.classList.add('show');\n        setTimeout(() => toast.classList.remove('show'), 2000);\n    }\n}\n\nfunction save() {\n    saveState(state);\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) {\n        // Migration check: if saved is just the plan array\n        if (Array.isArray(saved)) state.plan = saved;\n        else Object.assign(state, saved);\n    }\n\n    // Event Listeners\n    root.getElementById('btn-view-day').onclick = () => { state.view = 'day'; render(); };\n    root.getElementById('btn-view-week').onclick = () => { state.view = 'week'; render(); };\n    \n    root.querySelectorAll('.day-btn').forEach((btn, idx) => {\n        btn.onclick = () => { state.currentDay = idx; render(); };\n    });\n\n    root.getElementById('input-b').oninput = (e) => handleInput('b', e.target.value);\n    root.getElementById('input-l').oninput = (e) => handleInput('l', e.target.value);\n    root.getElementById('input-d').oninput = (e) => handleInput('d', e.target.value);\n    \n    root.getElementById('btn-clear-day').onclick = clearDay;\n\n    render();\n}\n\ninit();",
  "tags": [
    "nutrition",
    "planning",
    "health",
    "premium",
    "meal-planner"
  ]
}