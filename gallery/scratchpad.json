{
  "id": "scratchpad",
  "name": "Scratchpad",
  "description": "A simple and quick scratchpad for your notes and ideas.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"widget-card\">\n  <div class=\"widget-header\">\n    <div class=\"header-left\">\n      <span class=\"widget-icon\">üìù</span>\n      <h4 class=\"widget-title\">Scratchpad Pro</h4>\n    </div>\n    <div class=\"header-actions\">\n      <div class=\"slot-container\">\n        <div class=\"slot-selector\" id=\"slot-list\">\n          <!-- Dynamic slots -->\n        </div>\n        <div class=\"slot-controls\">\n          <button class=\"ctrl-btn\" id=\"btn-add-slot\" title=\"Add Slot\">+</button>\n          <button class=\"ctrl-btn btn-danger\" id=\"btn-remove-slot\" title=\"Remove Current Slot\">-</button>\n        </div>\n      </div>\n      <button class=\"btn-icon\" id=\"btn-preview\" title=\"Toggle Preview\">üëÅÔ∏è</button>\n      <button class=\"btn-icon\" id=\"btn-copy\" title=\"Copy to Clipboard\">üìã</button>\n      <button class=\"btn-icon btn-danger\" id=\"btn-clear\" title=\"Clear Note\">üóëÔ∏è</button>\n    </div>\n  </div>\n\n  <div class=\"toolbar\" id=\"editor-toolbar\">\n    <button class=\"tool-btn\" data-prefix=\"**\" data-suffix=\"**\" title=\"Bold\"><b>B</b></button>\n    <button class=\"tool-btn\" data-prefix=\"*\" data-suffix=\"*\" title=\"Italic\"><i>I</i></button>\n    <button class=\"tool-btn\" data-prefix=\"~~\" data-suffix=\"~~\" title=\"Strikethrough\"><del>S</del></button>\n    <button class=\"tool-btn\" data-prefix=\"- \" data-suffix=\"\" title=\"List\">‚Ä¢</button>\n    <button class=\"tool-btn\" data-prefix=\"### \" data-suffix=\"\" title=\"Heading\">H</button>\n    <button class=\"tool-btn\" data-prefix=\"`\" data-suffix=\"`\" title=\"Code\">[ ]</button>\n  </div>\n\n  <div class=\"editor-container\">\n    <textarea id=\"note-area\" placeholder=\"Start typing your thoughts...\"></textarea>\n    <div id=\"preview-area\" class=\"preview-mode\" style=\"display: none;\"></div>\n    <div class=\"copy-badge\" id=\"copy-badge\">Copied!</div>\n  </div>\n\n  <div class=\"widget-footer\">\n    <div class=\"stat-item\">\n      <span class=\"stat-label\">Words:</span>\n      <span class=\"stat-value\" id=\"word-count\">0</span>\n    </div>\n    <div class=\"stat-item\">\n      <span class=\"stat-label\">Chars:</span>\n      <span class=\"stat-value\" id=\"char-count\">0</span>\n    </div>\n    <div class=\"stat-item\">\n      <span class=\"stat-label\">Mode:</span>\n      <span class=\"stat-value\" id=\"current-view\">Editor</span>\n    </div>\n  </div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.widget-card {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 20px;\n    padding: 1.25rem;\n    box-shadow: var(--shadow-s);\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n    flex-wrap: wrap;\n    gap: 12px;\n}\n\n.header-left {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.widget-icon { font-size: 1.2rem; }\n.widget-title {\n    margin: 0;\n    font-size: 0.95rem;\n    font-weight: 700;\n    color: var(--text-normal);\n    letter-spacing: -0.01em;\n}\n\n.header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n}\n\n.slot-container {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    background: var(--background-primary);\n    padding: 3px 6px;\n    border-radius: 12px;\n    border: 1px solid var(--background-modifier-border);\n}\n\n.slot-selector {\n    display: flex;\n    gap: 4px;\n    max-width: 150px;\n    overflow-x: auto;\n    padding-bottom: 2px;\n    cursor: grab;\n    user-select: none;\n    scrollbar-width: none; /* Firefox */\n}\n\n.slot-selector::-webkit-scrollbar {\n    display: none; /* Chrome/Safari */\n}\n\n.slot-selector:active {\n    cursor: grabbing;\n}\n\n.slot-btn {\n    background: transparent;\n    border: none;\n    color: var(--text-muted);\n    min-width: 24px;\n    height: 24px;\n    padding: 0 6px;\n    border-radius: 7px;\n    font-size: 0.75rem;\n    font-weight: 700;\n    cursor: pointer;\n    transition: all 0.2s;\n    pointer-events: auto;\n}\n\n.slot-btn.active {\n    background: var(--interactive-accent);\n    color: white;\n}\n\n.slot-controls {\n    display: flex;\n    gap: 2px;\n    border-left: 1px solid var(--background-modifier-border);\n    padding-left: 6px;\n}\n\n.ctrl-btn {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-muted);\n    width: 20px;\n    height: 20px;\n    border-radius: 5px;\n    font-size: 0.8rem;\n    font-weight: 700;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s;\n}\n\n.ctrl-btn:hover {\n    background: var(--background-modifier-hover);\n    color: var(--text-normal);\n}\n\n.ctrl-btn.btn-danger:hover {\n    background: var(--background-modifier-error);\n    color: white;\n}\n\n.btn-icon {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-muted);\n    width: 32px;\n    height: 32px;\n    border-radius: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.9rem;\n    transition: all 0.2s;\n}\n\n.btn-icon:hover {\n    background: var(--background-modifier-hover);\n    color: var(--text-normal);\n    transform: translateY(-1px);\n}\n\n.btn-icon.active {\n    background: var(--interactive-accent);\n    color: white;\n    border-color: transparent;\n}\n\n.btn-danger:hover {\n    background: var(--background-modifier-error);\n    color: white;\n    border-color: transparent;\n}\n\n.toolbar {\n    display: flex;\n    gap: 4px;\n    margin-bottom: 0.75rem;\n    padding-bottom: 0.75rem;\n    border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.tool-btn {\n    background: transparent;\n    border: none;\n    color: var(--text-muted);\n    padding: 4px 8px;\n    border-radius: 6px;\n    font-size: 0.8rem;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.tool-btn:hover {\n    background: var(--background-modifier-hover);\n    color: var(--text-accent);\n}\n\n.editor-container {\n    position: relative;\n    margin-bottom: 1rem;\n}\n\ntextarea, .preview-mode {\n    width: 100%;\n    height: 220px;\n    background: var(--background-primary);\n    color: var(--text-normal);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 12px;\n    padding: 1rem;\n    font-size: 0.9rem;\n    resize: vertical;\n    outline: none;\n    line-height: 1.6;\n    transition: all 0.2s ease;\n    overflow-y: auto;\n}\n\ntextarea {\n    font-family: var(--font-monospace);\n}\n\n.preview-mode {\n    font-family: var(--font-interface);\n    white-space: pre-wrap;\n    word-break: break-word;\n}\n\n.preview-mode h1, .preview-mode h2, .preview-mode h3 { margin-top: 0; color: var(--text-accent); }\n.preview-mode b, .preview-mode strong { color: var(--text-accent); }\n.preview-mode code { background: var(--background-secondary); padding: 2px 4px; border-radius: 4px; font-family: var(--font-monospace); }\n\ntextarea:focus {\n    border-color: var(--interactive-accent);\n    box-shadow: 0 0 0 3px var(--background-modifier-border);\n}\n\n.copy-badge {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    background: var(--interactive-accent);\n    color: white;\n    padding: 4px 10px;\n    border-radius: 6px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    opacity: 0;\n    transform: translateY(-5px);\n    transition: all 0.3s ease;\n    pointer-events: none;\n    z-index: 10;\n}\n\n.copy-badge.show {\n    opacity: 1;\n    transform: translateY(0);\n}\n\n.widget-footer {\n    display: flex;\n    justify-content: flex-start;\n    gap: 16px;\n    padding-top: 0.5rem;\n}\n\n.stat-item {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 0.75rem;\n}\n\n.stat-label {\n    color: var(--text-faint);\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.stat-value {\n    color: var(--text-muted);\n    font-weight: 700;\n}\n\n/* Custom Scrollbar */\ntextarea::-webkit-scrollbar, .preview-mode::-webkit-scrollbar {\n    width: 6px;\n}\ntextarea::-webkit-scrollbar-thumb, .preview-mode::-webkit-scrollbar-thumb {\n    background: var(--background-modifier-border);\n    border-radius: 10px;\n}\ntextarea::-webkit-scrollbar-thumb:hover, .preview-mode::-webkit-scrollbar-thumb:hover {\n    background: var(--text-faint);\n}",
  "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    currentSlot: '1',\n    notes: { '1': '' },\n    isPreview: false,\n    scrollPos: 0\n};\n\nlet isDragging = false;\nlet startX;\nlet scrollLeft;\nlet saveTimeout;\n\nfunction parseMarkdown(text) {\n    if (!text) return '<i style=\"color:var(--text-faint)\">Nothing to preview...</i>';\n    let html = text\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/^### (.*$)/gim, '<h3>$1</h3>')\n        .replace(/^## (.*$)/gim, '<h2>$1</h2>')\n        .replace(/^# (.*$)/gim, '<h1>$1</h1>')\n        .replace(/\\*\\*(.*?)\\*\\*/g, '<b>$1</b>')\n        .replace(/\\*(.*?)\\*/g, '<i>$1</i>')\n        .replace(/~~(.*?)~~/g, '<del>$1</del>')\n        .replace(/`(.*?)`/g, '<code>$1</code>')\n        .replace(/^\\s*-\\s+(.*$)/gim, '‚Ä¢ $1')\n        .replace(/\\n/g, '<br>');\n    return html;\n}\n\nfunction updateStats() {\n    const area = root.getElementById('note-area');\n    if (!area) return;\n    const text = area.value;\n    root.getElementById('char-count').innerText = text.length;\n    root.getElementById('word-count').innerText = text.trim() ? text.trim().split(/\\s+/).length : 0;\n}\n\nfunction save() {\n    const area = root.getElementById('note-area');\n    if (!area) return;\n    state.notes[state.currentSlot] = area.value;\n    state.scrollPos = root.getElementById('slot-list').scrollLeft;\n    saveState(state);\n}\n\nfunction debouncedSave() {\n    updateStats();\n    clearTimeout(saveTimeout);\n    saveTimeout = setTimeout(save, 1000);\n}\n\nfunction renderSlots() {\n    const list = root.getElementById('slot-list');\n    list.innerHTML = '';\n    \n    const sortedSlots = Object.keys(state.notes).sort((a, b) => parseInt(a) - parseInt(b));\n    \n    sortedSlots.forEach(slot => {\n        const btn = document.createElement('button');\n        btn.className = `slot-btn ${slot === state.currentSlot ? 'active' : ''}`;\n        btn.innerText = slot;\n        \n        let clickStartTime;\n        btn.onmousedown = (e) => {\n            clickStartTime = Date.now();\n            e.stopPropagation();\n        };\n        btn.onmouseup = (e) => {\n            if (Date.now() - clickStartTime < 200) {\n                switchSlot(slot);\n            }\n            e.stopPropagation();\n        };\n        list.appendChild(btn);\n    });\n    \n    // Restore scroll position\n    list.scrollLeft = state.scrollPos || 0;\n}\n\nfunction initDragScroll() {\n    const slider = root.getElementById('slot-list');\n    \n    slider.addEventListener('mousedown', (e) => {\n        isDragging = true;\n        startX = e.pageX - slider.offsetLeft;\n        scrollLeft = slider.scrollLeft;\n    });\n\n    slider.addEventListener('mouseleave', () => {\n        isDragging = false;\n    });\n\n    slider.addEventListener('mouseup', () => {\n        isDragging = false;\n        state.scrollPos = slider.scrollLeft;\n        save();\n    });\n\n    slider.addEventListener('mousemove', (e) => {\n        if (!isDragging) return;\n        e.preventDefault();\n        const x = e.pageX - slider.offsetLeft;\n        const walk = (x - startX) * 2;\n        slider.scrollLeft = scrollLeft - walk;\n    });\n\n    slider.addEventListener('scroll', () => {\n        if (!isDragging) {\n            state.scrollPos = slider.scrollLeft;\n        }\n    });\n}\n\nfunction switchSlot(slot) {\n    const area = root.getElementById('note-area');\n    state.notes[state.currentSlot] = area.value;\n    state.currentSlot = slot;\n    \n    const newText = state.notes[slot] || '';\n    area.value = newText;\n    \n    if (state.isPreview) {\n        root.getElementById('preview-area').innerHTML = parseMarkdown(newText);\n    }\n\n    renderSlots();\n    updateStats();\n    save();\n}\n\nfunction addSlot() {\n    const slots = Object.keys(state.notes).map(s => parseInt(s));\n    const nextSlot = (slots.length > 0 ? Math.max(...slots) + 1 : 1).toString();\n    \n    state.notes[nextSlot] = '';\n    switchSlot(nextSlot);\n}\n\nfunction removeSlot() {\n    const slots = Object.keys(state.notes);\n    if (slots.length <= 1) {\n        alert('Cannot remove the last slot.');\n        return;\n    }\n    \n    if (confirm(`Remove slot ${state.currentSlot}? All content in this slot will be lost.`)) {\n        delete state.notes[state.currentSlot];\n        const remaining = Object.keys(state.notes).sort((a, b) => parseInt(a) - parseInt(b));\n        switchSlot(remaining[0]);\n    }\n}\n\nfunction togglePreview() {\n    state.isPreview = !state.isPreview;\n    const area = root.getElementById('note-area');\n    const preview = root.getElementById('preview-area');\n    const toolbar = root.getElementById('editor-toolbar');\n    const btn = root.getElementById('btn-preview');\n    const modeLabel = root.getElementById('current-view');\n\n    if (state.isPreview) {\n        preview.innerHTML = parseMarkdown(area.value);\n        area.style.display = 'none';\n        preview.style.display = 'block';\n        toolbar.style.opacity = '0.3';\n        toolbar.style.pointerEvents = 'none';\n        btn.classList.add('active');\n        modeLabel.innerText = 'Preview';\n    } else {\n        area.style.display = 'block';\n        preview.style.display = 'none';\n        toolbar.style.opacity = '1';\n        toolbar.style.pointerEvents = 'auto';\n        btn.classList.remove('active');\n        modeLabel.innerText = 'Editor';\n        area.focus();\n    }\n    save();\n}\n\nfunction clearNote() {\n    if (confirm('Clear this note?')) {\n        root.getElementById('note-area').value = '';\n        save();\n        if (state.isPreview) root.getElementById('preview-area').innerHTML = parseMarkdown('');\n    }\n}\n\nfunction copyToClipboard() {\n    const text = root.getElementById('note-area').value;\n    if (!text) return;\n    navigator.clipboard.writeText(text).then(() => {\n        const badge = root.getElementById('copy-badge');\n        badge.classList.add('show');\n        setTimeout(() => badge.classList.remove('show'), 2000);\n    });\n}\n\nfunction insertTool(prefix, suffix) {\n    const area = root.getElementById('note-area');\n    const start = area.selectionStart;\n    const end = area.selectionEnd;\n    const text = area.value;\n    const selected = text.substring(start, end);\n    area.value = text.substring(0, start) + prefix + selected + suffix + text.substring(end);\n    area.focus();\n    area.setSelectionRange(start + prefix.length, start + prefix.length + selected.length);\n    save();\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved && typeof saved === 'object' && saved.notes) {\n        Object.assign(state, saved);\n    } else if (typeof saved === 'string') {\n        state.notes['1'] = saved;\n    }\n\n    const area = root.getElementById('note-area');\n    area.value = state.notes[state.currentSlot] || '';\n    \n    // Re-enable oninput with debounce to fix \"impossible to write\"\n    // while still preventing constant re-renders\n    area.oninput = debouncedSave;\n    area.onblur = save;\n    \n    root.getElementById('btn-clear').onclick = clearNote;\n    root.getElementById('btn-copy').onclick = copyToClipboard;\n    root.getElementById('btn-preview').onclick = togglePreview;\n    root.getElementById('btn-add-slot').onclick = addSlot;\n    root.getElementById('btn-remove-slot').onclick = removeSlot;\n    \n    root.querySelectorAll('.tool-btn').forEach(btn => {\n        btn.onclick = () => insertTool(btn.dataset.prefix, btn.dataset.suffix);\n    });\n\n    if (state.isPreview) {\n        state.isPreview = false;\n        togglePreview();\n    }\n\n    renderSlots();\n    initDragScroll();\n    updateStats();\n}\n\ninit();",
  "tags": [
    "notes",
    "productivity",
    "text",
    "premium",
    "editor",
    "markdown",
    "dynamic",
    "drag"
  ]
}