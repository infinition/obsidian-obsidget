{
    "id": "health-tracker-pro",
    "name": "Health Tracker Pro",
    "description": "Monitor your health metrics like weight, sleep, and water intake.",
    "author": "Infinition",
    "authorUrl": "https://github.com/infinition",
    "html": "<div class=\"widget-card\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">‚öñÔ∏è Health Studio Pro</h4>\n    <div class=\"header-actions\">\n      <button id=\"btn-view-toggle\" class=\"btn-icon-small\" title=\"Toggle Graph/List\">üìä</button>\n      <button id=\"btn-reset\" class=\"btn-icon-small\" title=\"Clear All Data\">üóëÔ∏è</button>\n    </div>\n  </div>\n\n  <div class=\"hero-stats\">\n    <div class=\"main-stat\">\n      <div id=\"avg-weight\" class=\"stat-value\">0.0</div>\n      <div class=\"stat-label\">Avg Weight (kg)</div>\n    </div>\n    <div class=\"stat-divider\"></div>\n    <div class=\"main-stat\">\n      <div id=\"weight-diff\" class=\"stat-value\">0.0</div>\n      <div class=\"stat-label\">30d Change</div>\n    </div>\n  </div>\n\n  <div class=\"input-card\">\n    <div class=\"slider-group\">\n      <div class=\"slider-header\">\n        <label>Weight (kg)</label>\n        <span id=\"val-weight\" class=\"slider-val\">75.0kg</span>\n      </div>\n      <input type=\"range\" id=\"input-weight\" min=\"30\" max=\"150\" step=\"0.1\" value=\"75.0\" class=\"modern-slider\">\n    </div>\n    \n    <div class=\"slider-group\">\n      <div class=\"slider-header\">\n        <label>Body Fat (%)</label>\n        <span id=\"val-fat\" class=\"slider-val\">20%</span>\n      </div>\n      <input type=\"range\" id=\"input-fat\" min=\"5\" max=\"50\" step=\"0.5\" value=\"20\" class=\"modern-slider fat-slider\">\n    </div>\n    \n    <button class=\"btn-log\" id=\"btn-log\">Log Progress ‚ú®</button>\n  </div>\n\n  <div id=\"view-list\" class=\"view-container active\">\n    <div class=\"section-label\">Recent Logs (Drag to scroll, click to edit)</div>\n    <div class=\"history-list\" id=\"health-history\"></div>\n  </div>\n\n  <div id=\"view-graph\" class=\"view-container\">\n    <div class=\"section-label\">Weight Trends</div>\n    <div class=\"graph-wrapper\">\n      <svg id=\"health-graph\" viewBox=\"0 0 300 120\" preserveAspectRatio=\"none\"></svg>\n      <div class=\"graph-labels\">\n        <button id=\"btn-graph-range\" class=\"btn-range-toggle\">30 days</button>\n        <span>Today</span>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"toast-msg\" class=\"toast-msg\"></div>\n</div>",
    "css": ":host { display: block; margin: 1.5rem 0; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.widget-card {\n    background: linear-gradient(135deg, #064e3b 0%, #022c22 100%);\n    color: #ecfdf5;\n    border-radius: 28px;\n    padding: 1.5rem;\n    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n    border: 1px solid rgba(16, 185, 129, 0.2);\n    max-width: 360px;\n    margin: 0 auto;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.25rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 800;\n    color: #10b981;\n    text-transform: uppercase;\n    letter-spacing: 1.5px;\n}\n\n.header-actions { display: flex; gap: 8px; }\n\n.btn-icon-small {\n    background: rgba(255, 255, 255, 0.05);\n    border: none;\n    color: #a7f3d0;\n    width: 32px;\n    height: 32px;\n    border-radius: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s;\n}\n.btn-icon-small:hover { background: rgba(16, 185, 129, 0.2); color: white; }\n\n.hero-stats {\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 20px;\n    padding: 1rem;\n    margin-bottom: 1.25rem;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.stat-value {\n    font-size: 1.8rem;\n    font-weight: 800;\n    color: #10b981;\n    line-height: 1;\n    margin-bottom: 4px;\n}\n\n.stat-label {\n    font-size: 0.6rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    color: #6ee7b7;\n    opacity: 0.7;\n    letter-spacing: 0.5px;\n}\n\n.stat-divider {\n    width: 1px;\n    height: 30px;\n    background: rgba(255, 255, 255, 0.1);\n}\n\n.input-card {\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 20px;\n    padding: 1.25rem;\n    margin-bottom: 1.25rem;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.slider-group {\n    margin-bottom: 1.25rem;\n}\n\n.slider-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n}\n\n.slider-header label {\n    font-size: 0.7rem;\n    font-weight: 700;\n    color: #a7f3d0;\n    text-transform: uppercase;\n}\n\n.slider-val {\n    font-size: 0.9rem;\n    font-weight: 800;\n    color: #10b981;\n}\n\n.modern-slider {\n    -webkit-appearance: none;\n    width: 100%;\n    height: 6px;\n    background: #022c22;\n    border-radius: 10px;\n    outline: none;\n}\n\n.modern-slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 18px;\n    height: 18px;\n    background: #10b981;\n    border-radius: 50%;\n    cursor: pointer;\n    box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);\n    transition: transform 0.2s;\n}\n\n.modern-slider::-webkit-slider-thumb:hover { transform: scale(1.2); }\n\n.fat-slider::-webkit-slider-thumb { background: #34d399; box-shadow: 0 0 10px rgba(52, 211, 153, 0.5); }\n\n.btn-log {\n    width: 100%;\n    background: linear-gradient(135deg, #10b981, #059669);\n    color: white;\n    border: none;\n    padding: 12px;\n    border-radius: 12px;\n    font-weight: 700;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n.btn-log:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4); }\n\n.view-container { display: none; }\n.view-container.active { display: block; }\n\n.section-label {\n    font-size: 0.65rem;\n    font-weight: 800;\n    text-transform: uppercase;\n    color: #6ee7b7;\n    opacity: 0.6;\n    margin-bottom: 10px;\n    letter-spacing: 1px;\n}\n\n.history-list {\n    display: flex;\n    gap: 8px;\n    overflow-x: auto;\n    padding-bottom: 8px;\n    scrollbar-width: none;\n    cursor: grab;\n    user-select: none;\n}\n.history-list:active { cursor: grabbing; }\n.history-list::-webkit-scrollbar { display: none; }\n\n.history-item {\n    background: rgba(255, 255, 255, 0.03);\n    padding: 10px;\n    border-radius: 14px;\n    min-width: 75px;\n    text-align: center;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n    transition: transform 0.2s, background 0.2s;\n}\n.history-item:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-2px); }\n\n.h-val { display: block; font-weight: 800; font-size: 1rem; color: #10b981; pointer-events: none; }\n.h-sub { display: block; font-size: 0.6rem; color: #6ee7b7; opacity: 0.7; margin-bottom: 4px; pointer-events: none; }\n.h-date { font-size: 0.55rem; font-weight: 700; color: #34d399; text-transform: uppercase; pointer-events: none; }\n\n.graph-wrapper {\n    background: rgba(0,0,0,0.2);\n    border-radius: 16px;\n    padding: 12px;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n#health-graph {\n    width: 100%;\n    height: 100px;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n}\n\n.graph-labels {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 8px;\n    font-size: 0.6rem;\n    color: #6ee7b7;\n    opacity: 0.6;\n    font-weight: 700;\n    text-transform: uppercase;\n}\n\n.btn-range-toggle {\n    background: rgba(16, 185, 129, 0.1);\n    border: 1px solid rgba(16, 185, 129, 0.2);\n    color: #10b981;\n    padding: 2px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.6rem;\n    font-weight: 800;\n    text-transform: uppercase;\n    transition: all 0.2s;\n}\n.btn-range-toggle:hover { background: rgba(16, 185, 129, 0.2); color: white; }\n\n.toast-msg {\n    position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);\n    background: #10b981; color: white; padding: 8px 16px; border-radius: 100px;\n    font-size: 0.75rem; font-weight: 700; opacity: 0; transition: opacity 0.3s;\n    pointer-events: none; z-index: 100;\n}",
    "js": "const { root, saveState, getState } = api;\n\nconst RANGES = [\n    { label: '7 days', val: 7 },\n    { label: '30 days', val: 30 },\n    { label: '3 months', val: 90 },\n    { label: '6 months', val: 180 },\n    { label: '1 year', val: 365 }\n];\n\nlet state = {\n    history: [],\n    view: 'list',\n    rangeIdx: 1,\n    editingDate: null\n};\n\nfunction showToast(msg) {\n    const toast = root.querySelector('#toast-msg');\n    if (!toast) return;\n    toast.innerText = msg; toast.style.opacity = '1';\n    setTimeout(() => { toast.style.opacity = '0'; }, 2000);\n}\n\nfunction render() {\n    const list = root.querySelector('#health-history');\n    if (!list) return;\n    \n    // Update Stats\n    let totalW = 0;\n    state.history.forEach(item => totalW += parseFloat(item.weight));\n    const avgW = state.history.length > 0 ? (totalW / state.history.length).toFixed(1) : '0.0';\n    \n    let diff = '0.0';\n    if (state.history.length >= 30) {\n        const current = parseFloat(state.history[0].weight);\n        const old = parseFloat(state.history[29].weight);\n        const delta = (current - old).toFixed(1);\n        diff = (delta > 0 ? '+' : '') + delta;\n    }\n    \n    root.querySelector('#avg-weight').innerText = avgW;\n    root.querySelector('#weight-diff').innerText = diff;\n\n    // Render List\n    list.innerHTML = '';\n    state.history.forEach((item, idx) => {\n        const el = document.createElement('div');\n        el.className = 'history-item';\n        el.innerHTML = `\n            <span class=\"h-val\">${item.weight}kg</span>\n            <span class=\"h-sub\">${item.fat}% fat</span>\n            <span class=\"h-date\">${item.date}</span>\n        `;\n        el.onclick = () => editEntry(idx);\n        list.appendChild(el);\n    });\n\n    renderGraph();\n\n    root.querySelector('#view-list').className = 'view-container' + (state.view === 'list' ? ' active' : '');\n    root.querySelector('#view-graph').className = 'view-container' + (state.view === 'graph' ? ' active' : '');\n    root.querySelector('#btn-view-toggle').innerText = state.view === 'list' ? 'üìä' : 'üìú';\n    root.querySelector('#btn-graph-range').innerText = RANGES[state.rangeIdx].label;\n    \n    const logBtn = root.querySelector('#btn-log');\n    logBtn.innerText = state.editingDate ? `Update ${state.editingDate} ‚ú®` : 'Log Progress ‚ú®';\n}\n\nfunction editEntry(idx) {\n    const item = state.history[idx];\n    state.editingDate = item.date;\n    \n    const wSlider = root.querySelector('#input-weight');\n    const fSlider = root.querySelector('#input-fat');\n    \n    wSlider.value = item.weight;\n    fSlider.value = item.fat;\n    \n    root.querySelector('#val-weight').innerText = item.weight + 'kg';\n    root.querySelector('#val-fat').innerText = item.fat + '%';\n    \n    showToast(`Editing log from ${item.date} ‚úèÔ∏è`);\n    render();\n}\n\nfunction renderGraph() {\n    const svg = root.querySelector('#health-graph');\n    if (!svg) return;\n    if (state.history.length < 2) {\n        svg.innerHTML = '<text x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"#6ee7b7\" font-size=\"10\">Need more data...</text>';\n        return;\n    }\n    const range = RANGES[state.rangeIdx].val;\n    const data = state.history.slice(0, range).reverse();\n    const weights = data.map(d => parseFloat(d.weight));\n    const minW = Math.min(...weights) - 2;\n    const maxW = Math.max(...weights) + 2;\n    const width = 300, height = 120, padding = 10;\n    let points = '';\n    data.forEach((item, i) => {\n        const x = (i / (data.length - 1)) * (width - padding * 2) + padding;\n        const y = height - (((parseFloat(item.weight) - minW) / (maxW - minW)) * (height - padding * 2)) - padding;\n        points += `${x},${y} `;\n    });\n    svg.innerHTML = `\n        <defs>\n            <linearGradient id=\"grad-health\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                <stop offset=\"0%\" style=\"stop-color:#10b981;stop-opacity:0.3\" />\n                <stop offset=\"100%\" style=\"stop-color:#10b981;stop-opacity:0\" />\n            </linearGradient>\n        </defs>\n        <polyline points=\"${points}\" fill=\"none\" stroke=\"#10b981\" stroke-width=\"${range > 100 ? 1 : 2}\" />\n        <path d=\"M ${padding},${height} L ${points} L ${width-padding},${height} Z\" fill=\"url(#grad-health)\" />\n    `;\n}\n\nfunction logProgress() {\n    const weight = root.querySelector('#input-weight').value;\n    const fat = root.querySelector('#input-fat').value;\n    const date = state.editingDate || new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n\n    const existingIdx = state.history.findIndex(h => h.date === date);\n    if (existingIdx !== -1) {\n        state.history[existingIdx] = { weight, fat, date };\n    } else {\n        state.history.unshift({ weight, fat, date });\n    }\n\n    state.editingDate = null;\n    saveState(state);\n    render();\n    showToast('Progress saved! üí™');\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) state = Object.assign(state, saved);\n\n    const wSlider = root.querySelector('#input-weight');\n    const fSlider = root.querySelector('#input-fat');\n    wSlider.oninput = (e) => root.querySelector('#val-weight').innerText = e.target.value + 'kg';\n    fSlider.oninput = (e) => root.querySelector('#val-fat').innerText = e.target.value + '%';\n\n    root.querySelector('#btn-log').onclick = logProgress;\n    root.querySelector('#btn-view-toggle').onclick = () => {\n        state.view = state.view === 'list' ? 'graph' : 'list';\n        render();\n        saveState(state);\n    };\n    root.querySelector('#btn-graph-range').onclick = () => {\n        state.rangeIdx = (state.rangeIdx + 1) % RANGES.length;\n        render();\n        saveState(state);\n    };\n    root.querySelector('#btn-reset').onclick = () => {\n        if (confirm('Clear all data?')) {\n            state.history = [];\n            render();\n            saveState(state);\n            showToast('Data cleared üóëÔ∏è');\n        }\n    };\n\n    // Drag to scroll\n    const list = root.querySelector('#health-history');\n    let isDown = false, startX, scrollLeft;\n    list.onmousedown = (e) => {\n        isDown = true;\n        startX = e.pageX - list.offsetLeft;\n        scrollLeft = list.scrollLeft;\n    };\n    list.onmouseleave = () => isDown = false;\n    list.onmouseup = () => isDown = false;\n    list.onmousemove = (e) => {\n        if (!isDown) return;\n        e.preventDefault();\n        const x = e.pageX - list.offsetLeft;\n        const walk = (x - startX) * 2;\n        list.scrollLeft = scrollLeft - walk;\n    };\n\n    render();\n}\n\ninit();",
    "tags": [
        "health",
        "fitness",
        "weight",
        "tracker",
        "pro",
        "graph"
    ]
}