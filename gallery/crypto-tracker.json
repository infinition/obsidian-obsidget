{
  "id": "crypto-tracker",
  "name": "Crypto Tracker",
  "description": "Track real-time prices of your favorite cryptocurrencies.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"crypto-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">ðŸš€ Crypto Studio</h4>\n    <button class=\"btn-refresh\" id=\"btn-refresh\" title=\"Refresh Prices\">â†»</button>\n  </div>\n\n  <div class=\"balance-summary\">\n    <div class=\"summary-label\">Market Sentiment</div>\n    <div class=\"summary-value\" id=\"market-status\">Loading...</div>\n  </div>\n\n  <div class=\"crypto-list\" id=\"crypto-list\"></div>\n\n  <div class=\"add-section\">\n    <div class=\"input-group\">\n      <input type=\"text\" id=\"coin-id\" placeholder=\"Coin ID (e.g. bitcoin, solana)...\" class=\"modern-input\">\n      <button id=\"btn-add\" class=\"add-btn\">Add</button>\n    </div>\n    <div class=\"hint\">Use CoinGecko IDs (e.g. 'ethereum', 'cardano')</div>\n  </div>\n\n  <div class=\"last-update\" id=\"last-update\">Last updated: Never</div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.crypto-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 16px;\n    padding: 1.25rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.25rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 600;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n}\n\n.btn-refresh {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--interactive-accent);\n    width: 32px;\n    height: 32px;\n    border-radius: 8px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1rem;\n    transition: all 0.3s ease;\n}\n.btn-refresh:hover { background: var(--background-modifier-hover); transform: rotate(180deg); }\n.btn-refresh.loading { animation: spin 1s linear infinite; pointer-events: none; }\n@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n\n.balance-summary {\n    background: var(--background-primary);\n    border-radius: 12px;\n    padding: 1rem;\n    border: 1px solid var(--background-modifier-border);\n    text-align: center;\n    margin-bottom: 1.25rem;\n}\n.summary-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; font-weight: 600; margin-bottom: 4px; }\n.summary-value { font-size: 1.1rem; font-weight: 700; color: var(--interactive-accent); }\n\n.crypto-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-bottom: 1.25rem;\n}\n\n.crypto-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px 14px;\n    background: var(--background-primary);\n    border-radius: 10px;\n    border: 1px solid var(--background-modifier-border);\n    transition: all 0.2s ease;\n    animation: slideIn 0.3s ease-out;\n}\n@keyframes slideIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }\n.crypto-item:hover { border-color: var(--interactive-accent); transform: translateX(2px); }\n\n.coin-info {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n}\n.coin-img {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background: var(--background-secondary);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.8rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    border: 1px solid var(--background-modifier-border);\n}\n.coin-meta {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n}\n.coin-name {\n    font-size: 0.85rem;\n    font-weight: 700;\n    color: var(--text-normal);\n    text-transform: capitalize;\n}\n.coin-symbol {\n    font-size: 0.65rem;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    font-weight: 600;\n}\n\n.coin-data {\n    text-align: right;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n}\n.price-box { display: flex; flex-direction: column; gap: 2px; }\n.price { font-size: 0.9rem; font-weight: 700; }\n.change { font-size: 0.7rem; font-weight: 600; }\n.change.up { color: var(--text-success); }\n.change.down { color: var(--text-error); }\n\n.btn-del {\n    background: none;\n    border: none;\n    color: var(--text-muted);\n    cursor: pointer;\n    padding: 4px;\n    border-radius: 4px;\n    opacity: 0;\n    transition: all 0.2s;\n}\n.crypto-item:hover .btn-del { opacity: 1; }\n.btn-del:hover { background: var(--background-modifier-error-hover); color: var(--text-error); }\n\n.add-section {\n    border-top: 1px solid var(--background-modifier-border);\n    padding-top: 1.25rem;\n    margin-bottom: 1rem;\n}\n.input-group {\n    display: flex;\n    gap: 8px;\n}\n.modern-input {\n    flex: 1;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    border-radius: 8px;\n    padding: 8px 12px;\n    font-size: 0.8rem;\n    outline: none;\n}\n.modern-input:focus { border-color: var(--interactive-accent); }\n\n.add-btn {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 8px 16px;\n    border-radius: 8px;\n    font-weight: 600;\n    font-size: 0.8rem;\n    cursor: pointer;\n}\n.add-btn:hover { opacity: 0.9; }\n\n.hint {\n    font-size: 0.6rem;\n    color: var(--text-muted);\n    margin-top: 6px;\n    font-style: italic;\n}\n\n.last-update {\n    font-size: 0.65rem;\n    color: var(--text-muted);\n    text-align: center;\n    font-style: italic;\n}",
  "js": "const { root, saveState, getState, requestUrl } = api;\nlet trackedCoins = ['bitcoin', 'ethereum', 'solana'];\nlet coinData = {};\n\nasync function fetchPrices() {\n    const refreshBtn = root.getElementById('btn-refresh');\n    if (!refreshBtn) return;\n    refreshBtn.classList.add('loading');\n    \n    try {\n        const ids = trackedCoins.join(',');\n        if (!ids) {\n            coinData = {};\n            render();\n            root.getElementById('last-update').innerText = `Last updated: ${new Date().toLocaleTimeString()}`;\n            root.getElementById('market-status').innerText = 'No coins tracked';\n            return;\n        }\n\n        let data;\n        if (requestUrl) {\n            const response = await requestUrl({\n                url: `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true&include_last_updated_at=true`,\n                method: 'GET'\n            });\n            data = response.json;\n        } else {\n            const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true&include_last_updated_at=true`);\n            data = await response.json();\n        }\n        \n        if (data && Object.keys(data).length > 0) {\n            coinData = data;\n            render();\n            \n            const now = new Date();\n            root.getElementById('last-update').innerText = `Last updated: ${now.toLocaleTimeString()}`;\n            \n            const changes = Object.values(data).map(c => c.usd_24h_change);\n            const avgChange = changes.length > 0 ? changes.reduce((a, b) => a + b, 0) / changes.length : 0;\n            const statusEl = root.getElementById('market-status');\n            if (avgChange > 2) statusEl.innerText = 'ðŸ”¥ Bullish';\n            else if (avgChange < -2) statusEl.innerText = 'ðŸ§Š Bearish';\n            else statusEl.innerText = 'âš–ï¸ Neutral';\n        } else {\n            throw new Error('No data received');\n        }\n        \n    } catch (err) {\n        console.error('Crypto Tracker Error:', err);\n        root.getElementById('last-update').innerText = 'Update failed. Check coin IDs or connection.';\n        root.getElementById('market-status').innerText = 'âš ï¸ Error';\n    } finally {\n        refreshBtn.classList.remove('loading');\n    }\n}\n\nfunction render() {\n    const list = root.getElementById('crypto-list');\n    if (!list) return;\n    list.innerHTML = '';\n\n    trackedCoins.forEach(id => {\n        const data = coinData[id];\n        const item = document.createElement('div');\n        item.className = 'crypto-item';\n        \n        if (!data) {\n            item.innerHTML = `\n                <div class=\"coin-info\">\n                    <div class=\"coin-img\">?</div>\n                    <div class=\"coin-meta\">\n                        <span class=\"coin-name\">${id}</span>\n                        <span class=\"coin-symbol\">Pending...</span>\n                    </div>\n                </div>\n                <div class=\"coin-data\">\n                    <button class=\"btn-del\" title=\"Remove\">âœ•</button>\n                </div>\n            `;\n        } else {\n            const change = data.usd_24h_change || 0;\n            const isUp = change >= 0;\n            item.innerHTML = `\n                <div class=\"coin-info\">\n                    <div class=\"coin-img\">${id.charAt(0).toUpperCase()}</div>\n                    <div class=\"coin-meta\">\n                        <span class=\"coin-name\">${id}</span>\n                        <span class=\"coin-symbol\">${id.substring(0, 3)}</span>\n                    </div>\n                </div>\n                <div class=\"coin-data\">\n                    <div class=\"price-box\">\n                        <span class=\"price\">$${data.usd.toLocaleString()}</span>\n                        <span class=\"change ${isUp ? 'up' : 'down'}\">${isUp ? '+' : ''}${change.toFixed(2)}%</span>\n                    </div>\n                    <button class=\"btn-del\" title=\"Remove\">âœ•</button>\n                </div>\n            `;\n        }\n\n        item.querySelector('.btn-del').onclick = (e) => {\n            e.stopPropagation();\n            removeCoin(id);\n        };\n        \n        list.appendChild(item);\n    });\n}\n\nfunction addCoin() {\n    const input = root.getElementById('coin-id');\n    const id = input.value.trim().toLowerCase();\n    \n    if (id && !trackedCoins.includes(id)) {\n        trackedCoins.push(id);\n        input.value = '';\n        fetchPrices();\n        saveState(trackedCoins);\n    }\n}\n\nfunction removeCoin(id) {\n    trackedCoins = trackedCoins.filter(c => c !== id);\n    render();\n    saveState(trackedCoins);\n}\n\nasync function init() {\n    const saved = await getState();\n    if (Array.isArray(saved)) trackedCoins = saved;\n    \n    root.getElementById('btn-refresh').onclick = fetchPrices;\n    root.getElementById('btn-add').onclick = addCoin;\n    root.getElementById('coin-id').onkeydown = (e) => {\n        if (e.key === 'Enter') addCoin();\n    };\n\n    fetchPrices();\n    setInterval(fetchPrices, 300000);\n}\n\ninit();",
  "tags": [
    "finance",
    "crypto",
    "tracker"
  ]
}