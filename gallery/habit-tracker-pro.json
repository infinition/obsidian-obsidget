{
  "id": "habit-tracker-pro",
  "name": "Habit Tracker Pro",
  "description": "Advanced habit tracking with detailed statistics and streaks.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"habit-widget\">\n  <div class=\"widget-header\">\n    <div class=\"header-main\">\n      <h4 class=\"widget-title\">ğŸ”¥ Habit Studio Pro</h4>\n      <div class=\"header-actions\">\n        <button class=\"btn-icon\" id=\"btn-reset-week\" title=\"Reset Week\">â†»</button>\n        <button class=\"btn-edit\" id=\"btn-edit-toggle\">Edit</button>\n      </div>\n    </div>\n    <div class=\"input-group\" id=\"add-habit-group\">\n      <input type=\"text\" id=\"new-habit-name\" placeholder=\"New habit name...\">\n      <button id=\"btn-add-habit\">ADD</button>\n    </div>\n  </div>\n\n  <div class=\"habit-list\" id=\"habit-list\"></div>\n\n  <div class=\"stats-footer\">\n    <div class=\"stat-item\">\n      <span class=\"stat-val\" id=\"stat-avg\">0%</span>\n      <span class=\"stat-label\">Weekly Avg</span>\n    </div>\n    <div class=\"stat-item\">\n      <span class=\"stat-val\" id=\"stat-streak\">0</span>\n      <span class=\"stat-label\">Best Streak</span>\n    </div>\n  </div>\n\n  <div id=\"toast\" class=\"toast\">Habit added! ğŸš€</div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.habit-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n}\n\n.widget-header {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.header-main {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.header-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.btn-icon, .btn-edit {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    padding: 4px 10px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    cursor: pointer;\n    color: var(--text-muted);\n    transition: all 0.2s;\n}\n.btn-icon:hover, .btn-edit:hover { background: var(--background-modifier-hover); }\n.btn-edit.active {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border-color: var(--interactive-accent);\n}\n\n.input-group {\n    display: flex;\n    gap: 8px;\n    animation: fadeIn 0.3s ease;\n}\n\n.input-group input {\n    flex: 1;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    padding: 8px 12px;\n    border-radius: 10px;\n    font-size: 0.85rem;\n    outline: none;\n}\n\n.input-group button {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 0 16px;\n    border-radius: 10px;\n    font-size: 0.75rem;\n    font-weight: 800;\n    cursor: pointer;\n}\n\n.habit-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.habit-item {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 16px;\n    padding: 12px;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    position: relative;\n}\n\n.habit-item.new-habit {\n    animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n    from { opacity: 0; transform: translateY(10px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.habit-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.habit-name {\n    font-weight: 700;\n    font-size: 0.9rem;\n    color: var(--text-normal);\n}\n\n.habit-streak {\n    font-size: 0.7rem;\n    font-weight: 800;\n    color: #f59e0b;\n    background: rgba(245, 158, 11, 0.1);\n    padding: 2px 8px;\n    border-radius: 8px;\n}\n\n.habit-grid {\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    gap: 6px;\n}\n\n.day-dot {\n    aspect-ratio: 1;\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.6rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    transition: all 0.2s;\n}\n\n.day-dot.done {\n    background: var(--interactive-accent);\n    border-color: var(--interactive-accent);\n    color: var(--text-on-accent);\n    box-shadow: 0 0 10px rgba(var(--interactive-accent-rgb), 0.3);\n}\n\n.day-dot:hover { transform: scale(1.1); border-color: var(--interactive-accent); }\n\n.btn-del {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    background: none;\n    border: none;\n    color: var(--text-error);\n    opacity: 0;\n    cursor: pointer;\n    padding: 4px;\n    font-size: 1rem;\n    transition: opacity 0.2s;\n}\n.habit-item:hover .btn-del { opacity: 0.5; }\n.btn-del:hover { opacity: 1 !important; }\n\n.stats-footer {\n    display: flex;\n    gap: 1rem;\n    background: rgba(0,0,0,0.05);\n    padding: 12px;\n    border-radius: 16px;\n}\n\n.stat-item {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.stat-val {\n    font-size: 1.1rem;\n    font-weight: 900;\n    color: var(--interactive-accent);\n}\n\n.stat-label {\n    font-size: 0.55rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    text-transform: uppercase;\n}\n\n.toast {\n    position: absolute;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%) translateY(100px);\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    z-index: 100;\n}\n.toast.show { transform: translateX(-50%) translateY(0); }\n\n.hidden { display: none !important; }",
  "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    habits: [\n        { name: 'Morning Meditation', done: [true, true, false, true, false, false, false] },\n        { name: 'Read 20 Pages', done: [true, true, true, true, true, false, false] }\n    ],\n    isEditing: false\n};\n\nconst DAYS = ['M', 'T', 'W', 'T', 'F', 'S', 'S'];\n\nfunction render() {\n    const list = root.getElementById('habit-list');\n    const avgEl = root.getElementById('stat-avg');\n    const streakEl = root.getElementById('stat-streak');\n    const editBtn = root.getElementById('btn-edit-toggle');\n    const inputGroup = root.getElementById('add-habit-group');\n\n    if (!list) return;\n    list.innerHTML = '';\n\n    if (state.isEditing) {\n        editBtn.classList.add('active');\n        editBtn.innerText = 'Done';\n        inputGroup.classList.remove('hidden');\n    } else {\n        editBtn.classList.remove('active');\n        editBtn.innerText = 'Edit';\n        inputGroup.classList.add('hidden');\n    }\n\n    let totalDone = 0;\n    let totalPossible = state.habits.length * 7;\n    let maxStreak = 0;\n\n    state.habits.forEach((habit, hIdx) => {\n        const item = document.createElement('div');\n        item.className = 'habit-item';\n\n        let currentStreak = 0;\n        for (let i = habit.done.length - 1; i >= 0; i--) {\n            if (habit.done[i]) currentStreak++;\n            else break;\n        }\n\n        let bestStreak = 0;\n        let tempStreak = 0;\n        habit.done.forEach(d => {\n            if (d) {\n                tempStreak++;\n                if (tempStreak > bestStreak) bestStreak = tempStreak;\n            } else {\n                tempStreak = 0;\n            }\n        });\n\n        habit.done.forEach(d => { if (d) totalDone++; });\n        if (bestStreak > maxStreak) maxStreak = bestStreak;\n\n        let dotsHtml = '';\n        habit.done.forEach((d, dIdx) => {\n            dotsHtml += `<div class=\"day-dot ${d ? 'done' : ''}\" data-h=\"${hIdx}\" data-d=\"${dIdx}\">${DAYS[dIdx]}</div>`;\n        });\n\n        item.innerHTML = `\n            <div class=\"habit-info\">\n                <span class=\"habit-name\">${habit.name}</span>\n                <span class=\"habit-streak\">ğŸ”¥ ${bestStreak}d</span>\n            </div>\n            <div class=\"habit-grid\">${dotsHtml}</div>\n            ${state.isEditing ? `<button class=\"btn-del\" data-idx=\"${hIdx}\">ğŸ—‘ï¸</button>` : ''}\n        `;\n\n        list.appendChild(item);\n    });\n\n    const avg = totalPossible > 0 ? Math.round((totalDone / totalPossible) * 100) : 0;\n    if (avgEl) avgEl.innerText = `${avg}%`;\n    if (streakEl) streakEl.innerText = maxStreak;\n}\n\nfunction addHabit() {\n    const input = root.getElementById('new-habit-name');\n    const name = input.value.trim();\n    if (name) {\n        state.habits.push({\n            name,\n            done: [false, false, false, false, false, false, false]\n        });\n        input.value = '';\n        render();\n        save();\n        showToast('Habit added! ğŸš€');\n    }\n}\n\nfunction deleteHabit(idx) {\n    state.habits.splice(idx, 1);\n    render();\n    save();\n}\n\nfunction toggleDay(hIdx, dIdx, dotEl) {\n    state.habits[hIdx].done[dIdx] = !state.habits[hIdx].done[dIdx];\n    \n    // Surgical UI update to avoid full re-render flicker\n    if (dotEl) {\n        dotEl.classList.toggle('done', state.habits[hIdx].done[dIdx]);\n        \n        // Update best streak for this specific habit\n        const habitItem = dotEl.closest('.habit-item');\n        const streakEl = habitItem.querySelector('.habit-streak');\n        let bestStreak = 0;\n        let tempStreak = 0;\n        state.habits[hIdx].done.forEach(d => {\n            if (d) {\n                tempStreak++;\n                if (tempStreak > bestStreak) bestStreak = tempStreak;\n            } else {\n                tempStreak = 0;\n            }\n        });\n        if (streakEl) streakEl.innerText = `ğŸ”¥ ${bestStreak}d`;\n    }\n\n    // Update global stats\n    updateGlobalStats();\n    save();\n}\n\nfunction updateGlobalStats() {\n    const avgEl = root.getElementById('stat-avg');\n    const streakEl = root.getElementById('stat-streak');\n    \n    let totalDone = 0;\n    let totalPossible = state.habits.length * 7;\n    let maxStreak = 0;\n\n    state.habits.forEach(habit => {\n        let best = 0;\n        let current = 0;\n        habit.done.forEach(d => {\n            if (d) {\n                totalDone++;\n                current++;\n                if (current > best) best = current;\n            } else {\n                current = 0;\n            }\n        });\n        if (best > maxStreak) maxStreak = best;\n    });\n\n    const avg = totalPossible > 0 ? Math.round((totalDone / totalPossible) * 100) : 0;\n    if (avgEl) avgEl.innerText = `${avg}%`;\n    if (streakEl) streakEl.innerText = maxStreak;\n}\n\nfunction resetWeek() {\n    if (confirm('Reset all habits for this week?')) {\n        state.habits.forEach(h => h.done = [false, false, false, false, false, false, false]);\n        render();\n        save();\n    }\n}\n\nfunction toggleEdit() {\n    state.isEditing = !state.isEditing;\n    render();\n    save();\n}\n\nfunction showToast(msg) {\n    const toast = root.getElementById('toast');\n    if (toast) {\n        toast.innerText = msg;\n        toast.classList.add('show');\n        setTimeout(() => toast.classList.remove('show'), 2000);\n    }\n}\n\nfunction save() {\n    saveState(state);\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) {\n        if (Array.isArray(saved)) state.habits = saved;\n        else Object.assign(state, saved);\n    }\n\n    root.getElementById('btn-add-habit').onclick = addHabit;\n    root.getElementById('btn-reset-week').onclick = resetWeek;\n    root.getElementById('btn-edit-toggle').onclick = toggleEdit;\n    root.getElementById('new-habit-name').onkeydown = (e) => {\n        if (e.key === 'Enter') addHabit();\n    };\n\n    root.addEventListener('click', (e) => {\n        const dot = e.target.closest('.day-dot');\n        if (dot) {\n            const hIdx = parseInt(dot.dataset.h);\n            const dIdx = parseInt(dot.dataset.d);\n            toggleDay(hIdx, dIdx, dot);\n            return;\n        }\n\n        const del = e.target.closest('.btn-del');\n        if (del) {\n            const idx = parseInt(del.dataset.idx);\n            deleteHabit(idx);\n            return;\n        }\n    });\n\n    render();\n}\n\ninit();",
  "tags": [
    "productivity",
    "habits",
    "tracker",
    "premium"
  ]
}