{
  "id": "workout-timer",
  "name": "Workout Timer",
  "html": "<div class=\"widget-card\">\n  <h4 class=\"widget-title\">‚ö° HIIT Timer</h4>\n  \n  <div class=\"timer-circle\">\n    <div class=\"timer-val\" id=\"timer-display\">00:00</div>\n    <div class=\"timer-status\" id=\"timer-status\">READY</div>\n  </div>\n\n  <div class=\"settings-row\">\n    <div class=\"set-group\"><label>Work</label><input type=\"number\" id=\"work-s\" value=\"30\">s</div>\n    <div class=\"set-group\"><label>Rest</label><input type=\"number\" id=\"rest-s\" value=\"10\">s</div>\n    <div class=\"set-group\"><label>Sets</label><input type=\"number\" id=\"sets-n\" value=\"8\"></div>\n  </div>\n\n  <div class=\"controls\">\n    <button class=\"btn-main\" id=\"start-btn\">START</button>\n    <button class=\"btn-reset\" id=\"reset-btn\">‚Üª</button>\n  </div>\n\n  <div class=\"sets-left\" id=\"sets-left\">Sets: 8 / 8</div>\n</div>",
  "css": ":host { display: block; margin: 1.5rem 0; font-family: var(--font-interface); }\n.widget-card {\n    background: #ef4444;\n    color: white;\n    border-radius: 24px;\n    padding: 1.5rem;\n    box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);\n    text-align: center;\n    transition: background 0.3s;\n}\n.widget-title { margin: 0 0 1.5rem 0; font-size: 0.9rem; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; }\n\n.timer-circle {\n    width: 160px;\n    height: 160px;\n    border-radius: 50%;\n    border: 6px solid rgba(255,255,255,0.3);\n    margin: 0 auto 1.5rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n.timer-val { font-size: 2.5rem; font-weight: 900; font-family: var(--font-monospace); }\n.timer-status { font-size: 0.8rem; font-weight: 800; opacity: 0.8; }\n\n.settings-row {\n    display: flex;\n    justify-content: center;\n    gap: 12px;\n    margin-bottom: 1.5rem;\n    background: rgba(0,0,0,0.1);\n    padding: 10px;\n    border-radius: 12px;\n}\n.set-group { font-size: 0.7rem; font-weight: 700; }\n.set-group label { display: block; opacity: 0.7; margin-bottom: 2px; }\n.set-group input {\n    width: 40px;\n    background: rgba(255,255,255,0.2);\n    border: none;\n    color: white;\n    text-align: center;\n    border-radius: 4px;\n    font-weight: 800;\n    padding: 2px;\n}\n\n.controls { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 1rem; }\n.btn-main {\n    background: white;\n    color: #ef4444;\n    border: none;\n    padding: 12px 32px;\n    border-radius: 12px;\n    font-weight: 800;\n    font-size: 1.1rem;\n    cursor: pointer;\n    box-shadow: 0 4px 0 #dc2626;\n}\n.btn-main:active { transform: translateY(2px); box-shadow: 0 2px 0 #dc2626; }\n.btn-reset { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; opacity: 0.7; }\n\n.sets-left { font-size: 0.85rem; font-weight: 700; opacity: 0.9; }",
  "js": "var timerId = null;\nvar timeLeft = 0;\nvar currentSet = 0;\nvar totalSets = 8;\nvar isWork = true;\nvar workTime = 30;\nvar restTime = 10;\n\nfunction updateDisplay() {\n    var m = Math.floor(timeLeft / 60);\n    var s = timeLeft % 60;\n    api.root.getElementById('timer-display').innerText = (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;\n    api.root.getElementById('sets-left').innerText = 'Sets: ' + currentSet + ' / ' + totalSets;\n}\n\nfunction toggleTimer() {\n    if (timerId) {\n        clearInterval(timerId);\n        timerId = null;\n        api.root.getElementById('start-btn').innerText = 'START';\n    } else {\n        workTime = parseInt(api.root.getElementById('work-s').value);\n        restTime = parseInt(api.root.getElementById('rest-s').value);\n        totalSets = parseInt(api.root.getElementById('sets-n').value);\n        api.saveState({ workTime: workTime, restTime: restTime, totalSets: totalSets });\n        \n        if (timeLeft === 0) {\n            timeLeft = workTime;\n            currentSet = 1;\n            isWork = true;\n        }\n        \n        api.root.getElementById('start-btn').innerText = 'PAUSE';\n        timerId = setInterval(function() {\n            timeLeft--;\n            if (timeLeft < 0) {\n                if (isWork) {\n                    isWork = false;\n                    timeLeft = restTime;\n                    api.root.querySelector('.widget-card').style.background = '#3b82f6';\n                    api.root.getElementById('timer-status').innerText = 'REST';\n                } else {\n                    currentSet++;\n                    if (currentSet > totalSets) {\n                        clearInterval(timerId);\n                        timerId = null;\n                        resetTimer();\n                        api.root.getElementById('timer-status').innerText = 'DONE! üèÜ';\n                        return;\n                    }\n                    isWork = true;\n                    timeLeft = workTime;\n                    api.root.querySelector('.widget-card').style.background = '#ef4444';\n                    api.root.getElementById('timer-status').innerText = 'WORK';\n                }\n            }\n            updateDisplay();\n        }, 1000);\n    }\n}\n\nfunction resetTimer() {\n    clearInterval(timerId);\n    timerId = null;\n    timeLeft = parseInt(api.root.getElementById('work-s').value);\n    currentSet = 0;\n    isWork = true;\n    api.root.getElementById('start-btn').innerText = 'START';\n    api.root.getElementById('timer-status').innerText = 'READY';\n    api.root.querySelector('.widget-card').style.background = '#ef4444';\n    updateDisplay();\n}\n\nasync function init() {\n    var saved = await api.getState();\n    if (saved) {\n        workTime = saved.workTime || 30;\n        restTime = saved.restTime || 10;\n        totalSets = saved.totalSets || 8;\n        api.root.getElementById('work-s').value = workTime;\n        api.root.getElementById('rest-s').value = restTime;\n        api.root.getElementById('sets-n').value = totalSets;\n    }\n    \n    api.root.getElementById('start-btn').onclick = toggleTimer;\n    api.root.getElementById('reset-btn').onclick = resetTimer;\n    \n    resetTimer();\n}\n\ninit();",
  "tags": [
    "fitness",
    "time",
    "exercise"
  ]
}