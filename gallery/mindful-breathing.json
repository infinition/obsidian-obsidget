{
  "id": "mindful-breathing",
  "name": "Mindful Breathing",
  "description": "Practice mindful breathing with a guided visualizer.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"zen-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">ðŸ§˜ Zen Studio Pro</h4>\n    <select id=\"exercise-select\" class=\"exercise-select\">\n      <option value=\"box\">Box Breathing (4-4-4-4)</option>\n      <option value=\"478\">Relaxing (4-7-8)</option>\n      <option value=\"calm\">Calm (4-8)</option>\n      <option value=\"equal\">Equal (5-5)</option>\n    </select>\n  </div>\n\n  <div class=\"breathing-viewport\">\n    <div class=\"breathing-glow\" id=\"breathing-glow\"></div>\n    <div class=\"circle-outer\">\n      <div class=\"circle-inner\" id=\"breathing-circle\"></div>\n    </div>\n    <div class=\"instruction-container\">\n      <div class=\"phase-text\" id=\"instruction\">Ready?</div>\n      <div class=\"timer-text\" id=\"timer-text\">0</div>\n    </div>\n  </div>\n\n  <div class=\"controls\">\n    <button class=\"btn-main\" id=\"btn-breath\">START SESSION</button>\n    <button class=\"btn-reset\" id=\"btn-reset\">Reset Stats</button>\n  </div>\n\n  <div class=\"stats-panel\">\n    <div class=\"stat-item\">\n      <span class=\"stat-label\">TOTAL PRACTICE</span>\n      <span class=\"stat-value\" id=\"session-info\">0:00</span>\n    </div>\n  </div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.zen-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 28px;\n    padding: 2rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    text-align: center;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.2em;\n    color: var(--text-muted);\n}\n\n.exercise-select {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-normal);\n    padding: 8px 16px;\n    border-radius: 12px;\n    font-size: 0.85rem;\n    font-weight: 600;\n    outline: none;\n    cursor: pointer;\n    width: 100%;\n    max-width: 240px;\n}\n\n.breathing-viewport {\n    position: relative;\n    height: 240px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 1rem 0;\n}\n\n.breathing-glow {\n    position: absolute;\n    width: 200px;\n    height: 200px;\n    border-radius: 50%;\n    background: var(--breath-color, #10b981);\n    filter: blur(60px);\n    opacity: 0.15;\n    transition: background 1.5s ease, transform 1.5s ease;\n    z-index: 0;\n}\n\n.circle-outer {\n    width: 200px;\n    height: 200px;\n    border-radius: 50%;\n    border: 2px solid var(--background-modifier-border);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1;\n}\n\n.circle-inner {\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n    background: var(--breath-color, #10b981);\n    box-shadow: 0 0 30px var(--breath-color, #10b981);\n    transition: width var(--breath-duration, 4s) ease-in-out, \n                height var(--breath-duration, 4s) ease-in-out, \n                background 1.5s ease, \n                box-shadow 1.5s ease;\n}\n\n.instruction-container {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    z-index: 2;\n    pointer-events: none;\n}\n\n.phase-text {\n    font-size: 1.5rem;\n    font-weight: 800;\n    color: var(--text-normal);\n    text-shadow: 0 2px 10px rgba(0,0,0,0.2);\n}\n\n.timer-text {\n    font-size: 0.9rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    opacity: 0.8;\n}\n\n.controls {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    align-items: center;\n}\n\n.btn-main {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 14px 48px;\n    border-radius: 100px;\n    font-weight: 800;\n    font-size: 0.9rem;\n    letter-spacing: 0.05em;\n    cursor: pointer;\n    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    box-shadow: 0 4px 15px rgba(var(--interactive-accent-rgb), 0.3);\n}\n.btn-main:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(var(--interactive-accent-rgb), 0.4); }\n.btn-main.active { background: var(--background-modifier-error); box-shadow: 0 4px 15px rgba(var(--text-error-rgb), 0.3); }\n\n.btn-reset {\n    background: transparent;\n    border: none;\n    color: var(--text-muted);\n    font-size: 0.7rem;\n    font-weight: 600;\n    text-decoration: underline;\n    cursor: pointer;\n    opacity: 0.6;\n}\n.btn-reset:hover { opacity: 1; }\n\n.stats-panel {\n    background: var(--background-primary);\n    border-radius: 16px;\n    padding: 12px;\n    border: 1px solid var(--background-modifier-border);\n}\n\n.stat-item {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.stat-label {\n    font-size: 0.6rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    letter-spacing: 0.1em;\n}\n\n.stat-value {\n    font-size: 1.1rem;\n    font-weight: 700;\n    color: var(--text-normal);\n}",
  "js": "const { root, saveState, getState } = api;\n\nconst EXERCISES = {\n    box: { name: 'Box Breathing', inhale: 4, hold1: 4, exhale: 4, hold2: 4 },\n    '478': { name: 'Relaxing', inhale: 4, hold1: 7, exhale: 8, hold2: 0 },\n    calm: { name: 'Calm', inhale: 4, hold1: 0, exhale: 8, hold2: 0 },\n    equal: { name: 'Equal', inhale: 5, hold1: 0, exhale: 5, hold2: 0 }\n};\n\nconst COLORS = {\n    green: '#10b981',\n    blue: '#0ea5e9',\n    violet: '#8b5cf6'\n};\n\nlet isBreathing = false;\nlet totalTime = 0;\nlet currentExercise = 'box';\nlet timerId = null;\nlet sessionStartTime = null;\nlet countdownInterval = null;\n\nfunction renderStats() {\n    const mins = Math.floor(totalTime / 60);\n    const secs = totalTime % 60;\n    root.getElementById('session-info').innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n}\n\nfunction setBreathStyle(size, color, duration) {\n    const circle = root.getElementById('breathing-circle');\n    const glow = root.getElementById('breathing-glow');\n    \n    root.host.style.setProperty('--breath-color', color);\n    root.host.style.setProperty('--breath-duration', `${duration}s`);\n    \n    circle.style.width = `${size}px`;\n    circle.style.height = `${size}px`;\n    glow.style.transform = `scale(${size / 60})`;\n}\n\nfunction updateTimer(seconds) {\n    const timerEl = root.getElementById('timer-text');\n    let current = seconds;\n    timerEl.innerText = current;\n    \n    if (countdownInterval) clearInterval(countdownInterval);\n    countdownInterval = setInterval(() => {\n        current--;\n        if (current >= 0) timerEl.innerText = current;\n        else clearInterval(countdownInterval);\n    }, 1000);\n}\n\nasync function cycle() {\n    if (!isBreathing) return;\n\n    const ex = EXERCISES[currentExercise];\n    const instruction = root.getElementById('instruction');\n\n    // INHALE\n    instruction.innerText = 'Inhale';\n    setBreathStyle(180, COLORS.blue, ex.inhale);\n    updateTimer(ex.inhale);\n    await wait(ex.inhale * 1000);\n    if (!isBreathing) return;\n\n    // HOLD 1\n    if (ex.hold1 > 0) {\n        instruction.innerText = 'Hold';\n        setBreathStyle(180, COLORS.violet, 0.5);\n        updateTimer(ex.hold1);\n        await wait(ex.hold1 * 1000);\n        if (!isBreathing) return;\n    }\n\n    // EXHALE\n    instruction.innerText = 'Exhale';\n    setBreathStyle(60, COLORS.green, ex.exhale);\n    updateTimer(ex.exhale);\n    await wait(ex.exhale * 1000);\n    if (!isBreathing) return;\n\n    // HOLD 2\n    if (ex.hold2 > 0) {\n        instruction.innerText = 'Hold';\n        setBreathStyle(60, COLORS.violet, 0.5);\n        updateTimer(ex.hold2);\n        await wait(ex.hold2 * 1000);\n        if (!isBreathing) return;\n    }\n\n    cycle();\n}\n\nfunction wait(ms) {\n    return new Promise(resolve => {\n        timerId = setTimeout(resolve, ms);\n    });\n}\n\nfunction toggleBreathing() {\n    const btn = root.getElementById('btn-breath');\n    if (isBreathing) {\n        isBreathing = false;\n        btn.innerText = 'START SESSION';\n        btn.classList.remove('active');\n        root.getElementById('instruction').innerText = 'Ready?';\n        root.getElementById('timer-text').innerText = '0';\n        setBreathStyle(60, COLORS.green, 1);\n        \n        clearTimeout(timerId);\n        clearInterval(countdownInterval);\n        \n        const duration = Math.floor((Date.now() - sessionStartTime) / 1000);\n        totalTime += duration;\n        renderStats();\n        save();\n    } else {\n        isBreathing = true;\n        sessionStartTime = Date.now();\n        btn.innerText = 'STOP SESSION';\n        btn.classList.add('active');\n        currentExercise = root.getElementById('exercise-select').value;\n        cycle();\n    }\n}\n\nfunction resetStats() {\n    totalTime = 0;\n    renderStats();\n    save();\n}\n\nfunction save() {\n    saveState({ totalTime });\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) totalTime = saved.totalTime || 0;\n\n    root.getElementById('btn-breath').onclick = toggleBreathing;\n    root.getElementById('btn-reset').onclick = resetStats;\n    \n    renderStats();\n    setBreathStyle(60, COLORS.green, 1);\n}\n\ninit();",
  "tags": [
    "wellbeing",
    "meditation",
    "mindfulness",
    "premium",
    "breathing"
  ]
}