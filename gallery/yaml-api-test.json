{
    "id": "yaml-api-test",
    "name": "YAML API Tester",
    "description": "A powerful tool to test the new YAML API. Select any note from your vault and view/edit its YAML frontmatter in real-time. Perfect for building dashboards that interact with other notes.",
    "author": "Infinition",
    "authorUrl": "https://github.com/infinition",
    "html": "<div class=\"test-container\">\n  <h4>üõ†Ô∏è YAML API Tester</h4>\n  \n  <div class=\"selector-row\">\n    <label>Target Note:</label>\n    <div class=\"search-wrapper\">\n      <input type=\"text\" id=\"note-search\" list=\"note-list\" placeholder=\"Search or select a note...\" onchange=\"handleTargetChange()\">\n      <datalist id=\"note-list\">\n        <option value=\"\">Current Note</option>\n      </datalist>\n    </div>\n  </div>\n\n  <div class=\"input-row\">\n    <label>Property Value:</label>\n    <input type=\"text\" id=\"prop-value\" placeholder=\"Enter value to add...\" oninput=\"saveLocalState()\">\n  </div>\n\n  <div id=\"fm-display\" class=\"fm-box\">Loading...</div>\n  \n  <div class=\"actions\">\n    <button onclick=\"addProperty()\">Add 'test_obsidget'</button>\n    <button onclick=\"refreshFM()\" class=\"secondary\">Refresh</button>\n  </div>\n</div>",
    "css": ".test-container {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 12px;\n    padding: 15px;\n    color: var(--text-normal);\n}\n.selector-row, .input-row {\n    margin-bottom: 10px;\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n}\n.selector-row label, .input-row label {\n    font-size: 0.7rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    color: var(--text-muted);\n}\n.search-wrapper {\n    position: relative;\n    width: 100%;\n}\n#note-search, #prop-value {\n    width: 100%;\n    background: var(--background-primary);\n    color: var(--text-normal);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 6px;\n    padding: 8px;\n    font-size: 0.8rem;\n    outline: none;\n}\n#note-search:focus, #prop-value:focus {\n    border-color: var(--interactive-accent);\n}\n.fm-box {\n    background: var(--background-primary);\n    padding: 10px;\n    border-radius: 6px;\n    font-family: var(--font-monospace);\n    font-size: 0.8rem;\n    margin: 10px 0;\n    white-space: pre-wrap;\n    border: 1px solid var(--background-modifier-border);\n    max-height: 200px;\n    overflow-y: auto;\n}\n.actions { display: flex; gap: 8px; }\nbutton {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 6px 12px;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 0.8rem;\n}\nbutton.secondary {\n    background: var(--background-modifier-border);\n    color: var(--text-normal);\n}",
    "js": "async function saveLocalState() {\n    const path = root.getElementById('note-search').value;\n    const val = root.getElementById('prop-value').value;\n    await api.saveState({ targetPath: path, propValue: val });\n}\n\nasync function handleTargetChange() {\n    await saveLocalState();\n    await refreshFM();\n}\n\nasync function refreshFM() {\n    const display = root.getElementById('fm-display');\n    const path = root.getElementById('note-search').value;\n    \n    display.innerText = \"Loading...\";\n    const fm = await api.getFrontmatter(path);\n    display.innerText = JSON.stringify(fm, null, 2);\n}\n\nasync function addProperty() {\n    const path = root.getElementById('note-search').value;\n    const val = root.getElementById('prop-value').value || (\"Test \" + Math.floor(Math.random() * 100));\n    \n    await api.updateFrontmatter({ \n        test_obsidget: val,\n        last_update: new Date().toLocaleTimeString()\n    }, path);\n    \n    new Notice(\"YAML updated!\");\n    refreshFM();\n}\n\nfunction populateSelector() {\n    const datalist = root.getElementById('note-list');\n    const files = api.getFiles();\n    \n    files.forEach(file => {\n        const option = document.createElement('option');\n        option.value = file;\n        datalist.appendChild(option);\n    });\n}\n\nasync function init() {\n    populateSelector();\n    \n    const saved = await api.getState();\n    if (saved) {\n        if (saved.targetPath) root.getElementById('note-search').value = saved.targetPath;\n        if (saved.propValue) root.getElementById('prop-value').value = saved.propValue;\n    }\n    \n    refreshFM();\n}\n\ninit();",
    "tags": [
        "test",
        "api",
        "yaml",
        "properties",
        "persistence"
    ]
}