{
  "id": "hiit-pulse-pro",
  "name": "HIIT Pulse Pro",
  "description": "A professional HIIT timer for your workouts.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"widget-card phase-ready\" id=\"main-card\">\n  <div class=\"header\">\n    <div class=\"status-pill\" id=\"status-label\">READY</div>\n    <button id=\"btn-settings\" class=\"icon-btn\">‚öôÔ∏è</button>\n  </div>\n\n  <div id=\"settings-panel\" class=\"settings-overlay hidden\">\n    <div class=\"settings-content\">\n      <h5>HIIT Config</h5>\n      <div class=\"setting-row\">\n        <label>üî• Work (s)</label>\n        <input type=\"number\" id=\"inp-work\" value=\"30\">\n      </div>\n      <div class=\"setting-row\">\n        <label>‚ùÑÔ∏è Rest (s)</label>\n        <input type=\"number\" id=\"inp-rest\" value=\"10\">\n      </div>\n      <div class=\"setting-row\">\n        <label>üîÅ Sets</label>\n        <input type=\"number\" id=\"inp-sets\" value=\"8\">\n      </div>\n      <div class=\"setting-row\">\n        <label>üîä Sound</label>\n        <div class=\"toggle-container\">\n             <input type=\"checkbox\" id=\"inp-sound\" checked>\n        </div>\n      </div>\n      <button id=\"btn-save\" class=\"btn-primary\">Save & Reset</button>\n    </div>\n  </div>\n\n  <div class=\"timer-visual\">\n    <svg class=\"progress-ring\" width=\"200\" height=\"200\">\n      <circle class=\"bg-ring\" stroke=\"rgba(255,255,255,0.1)\" stroke-width=\"8\" fill=\"transparent\" r=\"90\" cx=\"100\" cy=\"100\"/>\n      <circle id=\"prog-circle\" class=\"fg-ring\" stroke=\"white\" stroke-width=\"8\" fill=\"transparent\" r=\"90\" cx=\"100\" cy=\"100\"/>\n    </svg>\n    <div class=\"timer-content\">\n      <div class=\"big-time\" id=\"time-display\">00:00</div>\n      <div class=\"set-info\" id=\"set-display\">Set 1 / 8</div>\n    </div>\n  </div>\n\n  <div class=\"controls\">\n    <button id=\"btn-toggle\" class=\"btn-big\">START</button>\n    <button id=\"btn-reset\" class=\"btn-icon-large\">‚Ü∫</button>\n  </div>\n</div>",
  "css": ":host { display: block; margin: 1rem 0; font-family: var(--font-interface); } * { box-sizing: border-box; } .widget-card { background: #1f2937; color: white; border-radius: 24px; padding: 1.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 360px; margin: 0 auto; position: relative; overflow: hidden; transition: background 0.5s; border: 1px solid rgba(255,255,255,0.1); } .phase-ready { background: #374151; } .phase-prep { background: #eab308; } .phase-work { background: #ef4444; } .phase-rest { background: #3b82f6; } .phase-done { background: #10b981; } .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; } .status-pill { font-size: 0.8rem; font-weight: 800; background: rgba(0,0,0,0.3); padding: 4px 12px; border-radius: 100px; text-transform: uppercase; letter-spacing: 1px; } .icon-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: white; opacity: 0.7; transition: opacity 0.2s; } .icon-btn:hover { opacity: 1; } .timer-visual { position: relative; width: 200px; height: 200px; margin: 0 auto 2rem; display: flex; align-items: center; justify-content: center; } .progress-ring { transform: rotate(-90deg); } .fg-ring { transition: stroke-dashoffset 1s linear; stroke-linecap: round; } .timer-content { position: absolute; text-align: center; } .big-time { font-size: 3.5rem; font-weight: 900; line-height: 1; font-family: var(--font-monospace); text-shadow: 0 4px 10px rgba(0,0,0,0.2); } .set-info { font-size: 0.9rem; font-weight: 600; opacity: 0.8; margin-top: 4px; } .controls { display: flex; justify-content: center; gap: 12px; } .btn-big { background: white; color: #1f2937; border: none; padding: 14px 40px; border-radius: 16px; font-weight: 900; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 0 rgba(0,0,0,0.2); width: 140px; transition: transform 0.1s; } .btn-big:active { transform: translateY(4px); box-shadow: none; } .btn-icon-large { background: rgba(255,255,255,0.1); border: none; width: 48px; height: 48px; border-radius: 16px; font-size: 1.5rem; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s; } .btn-icon-large:hover { background: rgba(255,255,255,0.2); } .settings-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.95); z-index: 10; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.2s; } .settings-overlay:not(.hidden) { opacity: 1; pointer-events: all; } .settings-content { width: 85%; background: #1f2937; padding: 1.5rem; border-radius: 16px; border: 1px solid rgba(255,255,255,0.2); text-align: center; } .settings-content h5 { margin: 0 0 1rem 0; color: #9ca3af; text-transform: uppercase; } .setting-row { display: flex; justify-content: space-between; margin-bottom: 12px; align-items: center; font-weight: bold; } .setting-row input[type=\"number\"] { width: 70px; background: #374151; border: none; color: white; padding: 6px; border-radius: 6px; text-align: center; font-weight: 700; font-size: 1rem; } .setting-row input[type=\"checkbox\"] { width: 20px; height: 20px; accent-color: #ef4444; } .hidden { display: none; } .btn-primary { background: #ef4444; color: white; border: none; padding: 10px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }",
  "js": "var root = api.root;\nvar saveState = api.saveState;\nvar getState = api.getState;\n\nvar config = { work: 30, rest: 10, sets: 8, sound: true };\nvar state = { phase: 'ready', timeLeft: 0, currentSet: 1, isRunning: false };\nvar timerInterval = null;\nvar circumference = 2 * Math.PI * 90;\nvar audioCtx = null;\n\nfunction beep(type) {\n    if (!config.sound) return;\n    try {\n        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n        if (audioCtx.state === 'suspended') audioCtx.resume();\n        \n        var osc = audioCtx.createOscillator();\n        var gain = audioCtx.createGain();\n        osc.connect(gain);\n        gain.connect(audioCtx.destination);\n        \n        // High pitch (880Hz) for start/stop, Low (440Hz) for countdown\n        osc.frequency.value = type === 'high' ? 880 : 440;\n        gain.gain.value = 0.1;\n        osc.start();\n        osc.stop(audioCtx.currentTime + (type === 'high' ? 0.4 : 0.2));\n    } catch(e) {}\n}\n\nfunction formatTime(s) {\n    var m = Math.floor(s/60);\n    var sec = s%60;\n    return (m<10?'0'+m:m) + ':' + (sec<10?'0'+sec:sec);\n}\n\nfunction render() {\n    var card = root.getElementById('main-card');\n    card.className = 'widget-card phase-' + state.phase;\n    \n    root.getElementById('status-label').innerText = state.phase.toUpperCase();\n    root.getElementById('time-display').innerText = formatTime(state.timeLeft);\n    \n    var setText = '';\n    if(state.phase === 'done') setText = 'Complete!';\n    else if(state.phase === 'ready') setText = config.sets + ' Sets';\n    else setText = 'Set ' + state.currentSet + ' / ' + config.sets;\n    \n    root.getElementById('set-display').innerText = setText;\n\n    var btn = root.getElementById('btn-toggle');\n    if(state.phase === 'done') btn.innerText = 'RESTART';\n    else btn.innerText = state.isRunning ? 'PAUSE' : 'START';\n\n    var total = 1;\n    if (state.phase === 'work') total = config.work;\n    else if (state.phase === 'rest') total = config.rest;\n    else if (state.phase === 'prep') total = 3;\n\n    var circle = root.getElementById('prog-circle');\n    circle.style.strokeDasharray = circumference;\n    \n    if(state.phase === 'ready' || state.phase === 'done') {\n        circle.style.strokeDashoffset = 0;\n    } else {\n        var pct = state.timeLeft / total;\n        circle.style.strokeDashoffset = circumference - (pct * circumference);\n    }\n}\n\nfunction tick() {\n    if (state.timeLeft > 0) {\n        state.timeLeft--;\n        if (state.timeLeft <= 3 && state.timeLeft > 0) beep('low');\n        if (state.timeLeft === 0) beep('high');\n        render();\n    } else {\n        nextPhase();\n    }\n}\n\nfunction nextPhase() {\n    if (state.phase === 'prep') {\n        state.phase = 'work';\n        state.timeLeft = config.work;\n    } else if (state.phase === 'work') {\n        if (state.currentSet >= config.sets) {\n            state.phase = 'done';\n            state.isRunning = false;\n            clearInterval(timerInterval);\n        } else {\n            state.phase = 'rest';\n            state.timeLeft = config.rest;\n        }\n    } else if (state.phase === 'rest') {\n        state.phase = 'work';\n        state.currentSet++;\n        state.timeLeft = config.work;\n    }\n    render();\n}\n\nfunction toggleTimer() {\n    if (state.phase === 'done') { reset(); return; }\n    \n    if (state.isRunning) {\n        clearInterval(timerInterval);\n        state.isRunning = false;\n    } else {\n        if (state.phase === 'ready') {\n            state.phase = 'prep';\n            state.timeLeft = 3;\n            beep('low');\n        }\n        timerInterval = setInterval(tick, 1000);\n        state.isRunning = true;\n    }\n    render();\n}\n\nfunction reset() {\n    clearInterval(timerInterval);\n    state.phase = 'ready';\n    state.currentSet = 1;\n    state.timeLeft = config.work;\n    state.isRunning = false;\n    render();\n}\n\nfunction loadUI() {\n    root.getElementById('inp-work').value = config.work;\n    root.getElementById('inp-rest').value = config.rest;\n    root.getElementById('inp-sets').value = config.sets;\n    root.getElementById('inp-sound').checked = config.sound;\n}\n\nasync function init() {\n    var saved = await getState();\n    if(saved) Object.assign(config, saved);\n    \n    state.timeLeft = config.work;\n    \n    root.getElementById('btn-toggle').onclick = toggleTimer;\n    root.getElementById('btn-reset').onclick = reset;\n    \n    root.getElementById('btn-settings').onclick = function() {\n        loadUI();\n        root.getElementById('settings-panel').classList.remove('hidden');\n    };\n    \n    root.getElementById('btn-save').onclick = function() {\n        config.work = parseInt(root.getElementById('inp-work').value);\n        config.rest = parseInt(root.getElementById('inp-rest').value);\n        config.sets = parseInt(root.getElementById('inp-sets').value);\n        config.sound = root.getElementById('inp-sound').checked;\n        api.saveState(config);\n        root.getElementById('settings-panel').classList.add('hidden');\n        reset();\n    };\n    \n    render();\n}\n\ninit();",
  "tags": [
    "fitness",
    "timer",
    "audio",
    "workout"
  ]
}