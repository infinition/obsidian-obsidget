{
  "id": "focus-hub",
  "name": "Focus Hub",
  "description": "A centralized hub for your focus sessions and tasks.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"widget-card\">\n  <div class=\"widget-header\">\n    <div class=\"header-info\">\n      <h4 class=\"widget-title\">üöÄ Focus Hub</h4>\n      <div class=\"date-subtitle\" id=\"date-display\">Today</div>\n    </div>\n    <div class=\"progress-container\">\n      <svg class=\"progress-ring\" width=\"48\" height=\"48\">\n        <circle class=\"progress-ring__circle-bg\" stroke=\"var(--background-modifier-border)\" stroke-width=\"4\" fill=\"transparent\" r=\"20\" cx=\"24\" cy=\"24\"/>\n        <circle id=\"prog-circle\" class=\"progress-ring__circle\" stroke=\"var(--interactive-accent)\" stroke-width=\"4\" fill=\"transparent\" r=\"20\" cx=\"24\" cy=\"24\"/>\n      </svg>\n      <span id=\"prog-text\" class=\"progress-text\">0%</span>\n    </div>\n  </div>\n\n  <div class=\"input-wrapper\">\n    <button id=\"prio-toggle\" class=\"prio-btn prio-2\" title=\"Priority: Medium\">‚óè</button>\n    <input type=\"text\" id=\"todo-input\" placeholder=\"New mission...\">\n    <button id=\"btn-add\" class=\"add-btn\">+</button>\n  </div>\n\n  <div class=\"filters\">\n    <button class=\"filter-btn active\" data-filter=\"all\">All</button>\n    <button class=\"filter-btn\" data-filter=\"active\">Active</button>\n    <button class=\"filter-btn\" data-filter=\"completed\">Done</button>\n  </div>\n\n  <div class=\"todo-list\" id=\"todo-list\">\n    \n  </div>\n\n  <div class=\"footer\">\n    <span id=\"items-count\">0 tasks</span>\n    <button class=\"btn-clear\" id=\"btn-clear\">Clear Done</button>\n  </div>\n</div>",
  "css": ":host { display: block; margin: 1rem 0; font-family: var(--font-interface); } * { box-sizing: border-box; } .widget-card { --prio-high: #ef4444; --prio-med: #f59e0b; --prio-low: #3b82f6; background: var(--background-secondary); border: 1px solid var(--background-modifier-border); border-radius: 20px; padding: 1.5rem; box-shadow: var(--shadow-s); max-width: 400px; margin: 0 auto; } .widget-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; } .widget-title { margin: 0; font-size: 1.2rem; font-weight: 900; color: var(--text-normal); } .date-subtitle { font-size: 0.8rem; color: var(--text-muted); font-weight: 600; margin-top: 2px; } .progress-container { position: relative; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; } .progress-ring__circle { transition: stroke-dashoffset 0.5s cubic-bezier(0.4, 0, 0.2, 1); transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: 125.6; stroke-dashoffset: 125.6; stroke-linecap: round; } .progress-text { position: absolute; font-size: 0.7rem; font-weight: 800; color: var(--text-normal); } .input-wrapper { display: flex; gap: 8px; background: var(--background-primary); padding: 6px; border-radius: 12px; border: 1px solid var(--background-modifier-border); margin-bottom: 1rem; align-items: center; } .prio-btn { width: 28px; height: 28px; border-radius: 8px; border: none; cursor: pointer; font-size: 1.2rem; line-height: 0; background: transparent; display: flex; align-items: center; justify-content: center; } .prio-1 { color: var(--prio-high); } .prio-2 { color: var(--prio-med); } .prio-3 { color: var(--prio-low); } #todo-input { flex: 1; border: none; background: transparent; color: var(--text-normal); font-size: 0.95rem; outline: none; padding: 8px 0; } .add-btn { background: var(--interactive-accent); color: var(--text-on-accent); border: none; border-radius: 8px; width: 32px; height: 32px; font-weight: bold; cursor: pointer; } .filters { display: flex; gap: 4px; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--background-modifier-border); } .filter-btn { background: none; border: none; color: var(--text-muted); font-size: 0.75rem; font-weight: 700; cursor: pointer; padding: 4px 8px; border-radius: 6px; } .filter-btn.active { color: var(--interactive-accent); background: rgba(var(--interactive-accent-rgb), 0.1); } .todo-list { max-height: 320px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; min-height: 50px; } .todo-item { display: flex; align-items: center; gap: 12px; padding: 10px 12px; background: var(--background-primary-alt); border-radius: 10px; border: 1px solid transparent; transition: all 0.2s; animation: slideIn 0.3s ease-out forwards; } @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } } .todo-item:hover { border-color: var(--background-modifier-border-hover); transform: translateX(2px); } .todo-item.completed { opacity: 0.6; } .todo-item.completed .todo-text { text-decoration: line-through; color: var(--text-muted); } .custom-cb { width: 20px; height: 20px; border: 2px solid var(--text-muted); border-radius: 6px; cursor: pointer; position: relative; } .todo-item.completed .custom-cb { background: var(--interactive-accent); border-color: var(--interactive-accent); } .todo-content { flex: 1; display: flex; flex-direction: column; } .todo-text { font-size: 0.9rem; font-weight: 500; color: var(--text-normal); } .prio-dot { width: 6px; height: 6px; border-radius: 50%; margin-top: 4px; } .btn-del { background: none; border: none; cursor: pointer; font-size: 0.9rem; opacity: 0.3; } .todo-item:hover .btn-del { opacity: 1; } .footer { margin-top: 1rem; padding-top: 0.8rem; border-top: 1px solid var(--background-modifier-border); display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-muted); } .btn-clear { background: none; border: none; color: var(--text-muted); cursor: pointer; font-weight: 600; } .btn-clear:hover { color: var(--text-error); } .empty-state { text-align: center; color: var(--text-faint); font-size: 0.85rem; padding: 1rem 0; font-style: italic; }",
  "js": "var root = api.root;\nvar saveState = api.saveState;\nvar getState = api.getState;\n\nvar todos = [];\nvar currentPrio = 2;\nvar currentFilter = 'all';\n\nfunction getPrioColor(p) {\n  if(p===1) return 'var(--prio-high)';\n  if(p===2) return 'var(--prio-med)';\n  return 'var(--prio-low)';\n}\n\nfunction updateProgress() {\n  var total = todos.length;\n  var done = 0;\n  for(var i=0; i<total; i++) { if(todos[i].done) done++; }\n  \n  var pct = total === 0 ? 0 : Math.round((done / total) * 100);\n  \n  root.getElementById('prog-text').innerText = pct + '%';\n  \n  var circle = root.getElementById('prog-circle');\n  if(circle) {\n      var radius = 20;\n      var circumference = radius * 2 * Math.PI;\n      var offset = circumference - (pct / 100) * circumference;\n      circle.style.strokeDashoffset = offset;\n  }\n\n  var left = total - done;\n  root.getElementById('items-count').innerText = left + ' task' + (left !== 1 ? 's' : '') + ' left';\n}\n\nfunction render() {\n  var list = root.getElementById('todo-list');\n  list.innerHTML = '';\n\n  var filtered = todos.filter(function(t) {\n    if (currentFilter === 'active') return !t.done;\n    if (currentFilter === 'completed') return t.done;\n    return true;\n  }).sort(function(a, b) { return a.prio - b.prio; });\n\n  if (filtered.length === 0) {\n    list.innerHTML = '<div class=\"empty-state\">No tasks found.</div>';\n  } else {\n    filtered.forEach(function(todo) {\n      var el = document.createElement('div');\n      el.className = 'todo-item' + (todo.done ? ' completed' : '');\n      \n      var html = '<div class=\"custom-cb\"></div>' +\n                 '<div class=\"todo-content\">' +\n                    '<span class=\"todo-text\">' + todo.text + '</span>' +\n                    '<div class=\"prio-dot\" style=\"background: ' + getPrioColor(todo.prio) + '\"></div>' +\n                 '</div>' +\n                 '<button class=\"btn-del\">üóëÔ∏è</button>';\n      el.innerHTML = html;\n\n      var cb = el.querySelector('.custom-cb');\n      cb.onclick = function() { toggleTodo(todo.id); };\n      \n      var del = el.querySelector('.btn-del');\n      del.onclick = function(e) { e.stopPropagation(); deleteTodo(todo.id); };\n      \n      var txt = el.querySelector('.todo-text');\n      txt.ondblclick = function() {\n         var newText = prompt('Edit task:', todo.text);\n         if(newText && newText.trim()) editTodo(todo.id, newText.trim());\n      };\n\n      list.appendChild(el);\n    });\n  }\n  updateProgress();\n}\n\nfunction addTodo() {\n  var input = root.getElementById('todo-input');\n  var text = input.value.trim();\n  if (!text) return;\n\n  todos.push({\n    id: Date.now(),\n    text: text,\n    done: false,\n    prio: currentPrio\n  });\n  \n  input.value = '';\n  render();\n  saveState(todos);\n}\n\nfunction toggleTodo(id) {\n  for(var i=0; i<todos.length; i++) {\n      if(todos[i].id === id) {\n          todos[i].done = !todos[i].done;\n          break;\n      }\n  }\n  render();\n  saveState(todos);\n}\n\nfunction deleteTodo(id) {\n  var newTodos = [];\n  for(var i=0; i<todos.length; i++) {\n      if(todos[i].id !== id) newTodos.push(todos[i]);\n  }\n  todos = newTodos;\n  render();\n  saveState(todos);\n}\n\nfunction editTodo(id, newText) {\n  for(var i=0; i<todos.length; i++) {\n      if(todos[i].id === id) {\n          todos[i].text = newText;\n          break;\n      }\n  }\n  render();\n  saveState(todos);\n}\n\nfunction clearCompleted() {\n  var newTodos = [];\n  for(var i=0; i<todos.length; i++) {\n      if(!todos[i].done) newTodos.push(todos[i]);\n  }\n  todos = newTodos;\n  render();\n  saveState(todos);\n}\n\nasync function init() {\n  var saved = await getState();\n  if (saved && Array.isArray(saved)) todos = saved;\n\n  var d = new Date();\n  root.getElementById('date-display').innerText = d.toLocaleDateString();\n\n  root.getElementById('btn-add').onclick = addTodo;\n  root.getElementById('todo-input').onkeydown = function(e) { if(e.key === 'Enter') addTodo(); };\n  root.getElementById('btn-clear').onclick = clearCompleted;\n  \n  // Filters\n  var btns = root.querySelectorAll('.filter-btn');\n  btns.forEach(function(btn) {\n    btn.onclick = function() {\n      btns.forEach(function(b) { b.classList.remove('active'); });\n      btn.classList.add('active');\n      currentFilter = btn.getAttribute('data-filter');\n      render();\n    };\n  });\n\n  // Prio Toggle\n  var pBtn = root.getElementById('prio-toggle');\n  pBtn.onclick = function() {\n    currentPrio++;\n    if(currentPrio > 3) currentPrio = 1;\n    pBtn.className = 'prio-btn prio-' + currentPrio;\n  };\n\n  render();\n}\n\ninit();",
  "tags": [
    "productivity",
    "focus",
    "tasks"
  ]
}