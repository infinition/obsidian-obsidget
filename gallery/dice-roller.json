{
  "id": "dice-roller",
  "name": "Dice Studio Slot",
  "description": "Roll various types of dice for your games or decisions.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"dice-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">üé∞ Dice Studio Slot</h4>\n    <button class=\"btn-icon\" id=\"btn-clear\" title=\"Clear History\">üóëÔ∏è</button>\n  </div>\n\n  <div class=\"slot-arena\">\n    <div class=\"slot-window\">\n      <div class=\"slot-reel\" id=\"slot-reel\">\n        <div class=\"slot-number\">?</div>\n      </div>\n      <div class=\"slot-overlay\"></div>\n    </div>\n    <div class=\"dice-type-badge\" id=\"dice-type-badge\">None</div>\n  </div>\n\n  <div class=\"dice-selector\">\n    <button class=\"dice-btn\" data-sides=\"4\">D4</button>\n    <button class=\"dice-btn\" data-sides=\"6\">D6</button>\n    <button class=\"dice-btn\" data-sides=\"8\">D8</button>\n    <button class=\"dice-btn\" data-sides=\"10\">D10</button>\n    <button class=\"dice-btn\" data-sides=\"12\">D12</button>\n    <button class=\"dice-btn\" data-sides=\"20\">D20</button>\n    <button class=\"dice-btn\" data-sides=\"100\">D100</button>\n  </div>\n\n  <button class=\"roll-btn\" id=\"btn-roll\">SELECT A DIE</button>\n\n  <div class=\"history-section\">\n    <div class=\"history-header\">\n      <label>Recent Rolls</label>\n      <span class=\"history-count\" id=\"history-count\">0</span>\n    </div>\n    <div class=\"history-container\">\n      <div class=\"history-list\" id=\"roll-history\"></div>\n      <div class=\"history-fade-left\"></div>\n      <div class=\"history-fade-right\"></div>\n    </div>\n  </div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.dice-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.btn-icon {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 1rem;\n    opacity: 0.6;\n    transition: opacity 0.2s;\n}\n.btn-icon:hover { opacity: 1; }\n\n.slot-arena {\n    height: 160px;\n    background: #0f172a;\n    border-radius: 20px;\n    border: 1px solid rgba(255,255,255,0.05);\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1.5rem;\n    overflow: hidden;\n    box-shadow: inset 0 10px 30px rgba(0,0,0,0.5);\n}\n\n.slot-window {\n    width: 100px;\n    height: 100px;\n    position: relative;\n    overflow: hidden;\n    background: rgba(255,255,255,0.03);\n    border-radius: 12px;\n    border: 2px solid var(--interactive-accent);\n    box-shadow: 0 0 20px rgba(var(--interactive-accent-rgb), 0.2);\n}\n\n.slot-reel {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    transition: transform 1.5s cubic-bezier(0.1, 0, 0.1, 1);\n}\n\n.slot-number {\n    height: 100px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 3.5rem;\n    font-weight: 900;\n    color: white;\n    text-shadow: 0 0 15px var(--interactive-accent);\n}\n\n.slot-overlay {\n    position: absolute;\n    top: 0; left: 0; width: 100%; height: 100%;\n    background: linear-gradient(rgba(15,23,42,1) 0%, rgba(15,23,42,0) 20%, rgba(15,23,42,0) 80%, rgba(15,23,42,1) 100%);\n    pointer-events: none;\n}\n\n.dice-type-badge {\n    margin-top: 10px;\n    font-size: 0.7rem;\n    font-weight: 800;\n    color: var(--interactive-accent);\n    background: rgba(var(--interactive-accent-rgb), 0.1);\n    padding: 2px 10px;\n    border-radius: 10px;\n    text-transform: uppercase;\n}\n\n.dice-selector {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n    margin-bottom: 1rem;\n}\n\n.dice-btn {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    color: var(--text-muted);\n    padding: 8px 4px;\n    border-radius: 10px;\n    font-size: 0.75rem;\n    font-weight: 700;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n.dice-btn.active {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border-color: var(--interactive-accent);\n}\n\n.roll-btn {\n    width: 100%;\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 14px;\n    border-radius: 14px;\n    font-weight: 800;\n    font-size: 1rem;\n    cursor: pointer;\n    box-shadow: 0 4px 0 rgba(0,0,0,0.2);\n    transition: all 0.1s;\n    margin-bottom: 1.5rem;\n}\n.roll-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; box-shadow: none !important; background: var(--background-modifier-border); color: var(--text-muted); }\n.roll-btn:active:not(:disabled) { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.2); }\n\n.history-section {\n    background: rgba(0,0,0,0.1);\n    padding: 12px;\n    border-radius: 16px;\n}\n\n.history-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.history-header label {\n    font-size: 0.65rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    text-transform: uppercase;\n}\n\n.history-count {\n    font-size: 0.65rem;\n    font-weight: 800;\n    background: var(--background-modifier-border);\n    padding: 2px 6px;\n    border-radius: 6px;\n    color: var(--text-muted);\n}\n\n.history-container {\n    position: relative;\n    overflow: hidden;\n}\n\n.history-list {\n    display: flex;\n    gap: 10px;\n    overflow-x: auto;\n    padding: 4px 0;\n    scrollbar-width: none;\n}\n.history-list::-webkit-scrollbar { display: none; }\n\n.history-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    min-width: 45px;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    padding: 6px;\n    border-radius: 10px;\n    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n}\n\n@keyframes popIn {\n    from { opacity: 0; transform: scale(0.8); }\n    to { opacity: 1; transform: scale(1); }\n}\n\n.hist-sides {\n    font-size: 0.55rem;\n    font-weight: 800;\n    color: var(--text-muted);\n    margin-bottom: 2px;\n}\n\n.hist-val {\n    font-size: 0.9rem;\n    font-weight: 900;\n    color: var(--interactive-accent);\n}\n\n.history-fade-left, .history-fade-right {\n    position: absolute;\n    top: 0; bottom: 0; width: 20px;\n    pointer-events: none;\n    z-index: 1;\n}\n.history-fade-left { left: 0; background: linear-gradient(to right, rgba(0,0,0,0.1), transparent); }\n.history-fade-right { right: 0; background: linear-gradient(to left, rgba(0,0,0,0.1), transparent); }",
  "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    history: [], // Array of { sides: number, val: number }\n    currentSides: null,\n    lastResult: null\n};\n\nlet isRolling = false;\n\nfunction renderHistory() {\n    const list = root.getElementById('roll-history');\n    const count = root.getElementById('history-count');\n    if (!list || !count) return;\n    \n    list.innerHTML = '';\n    count.innerText = state.history.length;\n    \n    state.history.forEach(item => {\n        const div = document.createElement('div');\n        div.className = 'history-item';\n        div.innerHTML = `\n            <span class=\"hist-sides\">D${item.sides}</span>\n            <span class=\"hist-val\">${item.val}</span>\n        `;\n        list.appendChild(div);\n    });\n}\n\nfunction roll() {\n    if (isRolling || !state.currentSides) return;\n    isRolling = true;\n    \n    const btn = root.getElementById('btn-roll');\n    if (btn) {\n        btn.disabled = true;\n        btn.innerText = 'ROLLING...';\n    }\n\n    const reel = root.getElementById('slot-reel');\n    const result = Math.floor(Math.random() * state.currentSides) + 1;\n    \n    const reelNumbers = [];\n    for (let i = 0; i < 20; i++) {\n        reelNumbers.push(Math.floor(Math.random() * state.currentSides) + 1);\n    }\n    reelNumbers.push(result);\n\n    reel.innerHTML = reelNumbers.map(n => `<div class=\"slot-number\">${n}</div>`).join('');\n    \n    reel.style.transition = 'none';\n    reel.style.transform = 'translateY(0)';\n    reel.offsetHeight;\n\n    const targetY = -(reelNumbers.length - 1) * 100;\n    reel.style.transition = 'transform 1.5s cubic-bezier(0.1, 0, 0.1, 1)';\n    reel.style.transform = `translateY(${targetY}px)`;\n\n    setTimeout(() => {\n        state.lastResult = result;\n        state.history.unshift({ sides: state.currentSides, val: result });\n        if (state.history.length > 20) state.history.pop();\n        \n        renderHistory();\n        save();\n        \n        isRolling = false;\n        if (btn) {\n            btn.disabled = false;\n            btn.innerText = 'SPIN DICE';\n        }\n    }, 1600);\n}\n\nfunction setDice(sides) {\n    state.currentSides = sides ? parseInt(sides) : null;\n    \n    root.querySelectorAll('.dice-btn').forEach(b => {\n        b.classList.toggle('active', parseInt(b.dataset.sides) === state.currentSides);\n    });\n    \n    const badge = root.getElementById('dice-type-badge');\n    const btn = root.getElementById('btn-roll');\n    \n    if (state.currentSides) {\n        if (badge) badge.innerText = `D${state.currentSides}`;\n        if (btn) {\n            btn.disabled = false;\n            btn.innerText = 'SPIN DICE';\n        }\n    } else {\n        if (badge) badge.innerText = 'None';\n        if (btn) {\n            btn.disabled = true;\n            btn.innerText = 'SELECT A DIE';\n        }\n    }\n    \n    const reel = root.getElementById('slot-reel');\n    if (reel) {\n        reel.style.transition = 'none';\n        reel.style.transform = 'translateY(0)';\n        reel.innerHTML = `<div class=\"slot-number\">${state.lastResult || '?'}</div>`;\n    }\n    \n    save();\n}\n\nfunction save() {\n    saveState(state);\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) {\n        // Migration for old history format if needed\n        if (saved.history && saved.history.length > 0 && typeof saved.history[0] === 'string') {\n            saved.history = []; // Reset if old format to avoid errors\n        }\n        Object.assign(state, saved);\n    }\n\n    const rollBtn = root.getElementById('btn-roll');\n    if (rollBtn) {\n        rollBtn.onclick = (e) => {\n            e.preventDefault();\n            roll();\n        };\n    }\n\n    const clearBtn = root.getElementById('btn-clear');\n    if (clearBtn) {\n        clearBtn.onclick = () => {\n            state.history = [];\n            renderHistory();\n            save();\n        };\n    }\n\n    root.querySelectorAll('.dice-btn').forEach(btn => {\n        btn.onclick = () => setDice(btn.dataset.sides);\n    });\n\n    setDice(state.currentSides);\n    renderHistory();\n    \n    // Safety reset\n    isRolling = false;\n    if (rollBtn) rollBtn.disabled = !state.currentSides;\n}\n\ninit();",
  "tags": [
    "games",
    "random",
    "entertainment",
    "rpg",
    "premium"
  ]
}