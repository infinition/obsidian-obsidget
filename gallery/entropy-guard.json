{
  "id": "entropy-guard",
  "name": "Entropy Guard",
  "description": "Generate secure passwords and check their strength.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"entropy-widget\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">üõ°Ô∏è Entropy Guard Pro</h4>\n    <button class=\"btn-icon\" id=\"btn-copy\" title=\"Copy to Clipboard\">üìã</button>\n  </div>\n\n  <div class=\"pass-arena\">\n    <div class=\"pass-display\">\n      <input type=\"text\" id=\"pass-out\" spellcheck=\"false\" placeholder=\"Type or generate...\" title=\"Click to copy\">\n      <div class=\"copy-feedback\" id=\"copy-feedback\">Copied!</div>\n    </div>\n    <button class=\"refresh-btn\" id=\"btn-refresh\" title=\"Regenerate Password\">‚Ü∫</button>\n  </div>\n\n  <div class=\"settings-panel\">\n    <div class=\"setting-item\">\n      <div class=\"label-row\">\n        <span>Length</span>\n        <b id=\"len-val\">16</b>\n      </div>\n      <input type=\"range\" id=\"len\" min=\"1\" max=\"64\" value=\"16\">\n    </div>\n\n    <div class=\"options-grid\">\n      <label class=\"option-check\">\n        <input type=\"checkbox\" id=\"opt-upper\" checked>\n        <span class=\"check-label\">ABC</span>\n      </label>\n      <label class=\"option-check\">\n        <input type=\"checkbox\" id=\"opt-lower\" checked>\n        <span class=\"check-label\">abc</span>\n      </label>\n      <label class=\"option-check\">\n        <input type=\"checkbox\" id=\"opt-num\" checked>\n        <span class=\"check-label\">123</span>\n      </label>\n      <label class=\"option-check\">\n        <input type=\"checkbox\" id=\"opt-sym\" checked>\n        <span class=\"check-label\">#$&</span>\n      </label>\n    </div>\n\n    <div class=\"setting-item\">\n      <div class=\"label-row\">\n        <span>Cracking Power (RTX 4090s)</span>\n        <b id=\"gpu-val\">1</b>\n      </div>\n      <input type=\"range\" id=\"gpu-count\" min=\"1\" max=\"100\" value=\"1\">\n    </div>\n  </div>\n\n  <div class=\"strength-section\">\n    <div class=\"strength-header\">\n      <div class=\"label-row\">\n        <span>Security Strength</span>\n        <span id=\"strength-label\" style=\"margin-left: 8px;\">Strong</span>\n      </div>\n      <div class=\"entropy-badge\"><span id=\"entropy-val\">0</span> bits</div>\n    </div>\n    <div class=\"progress-container\">\n      <div id=\"strength-bar\" class=\"progress-fill\"></div>\n    </div>\n    <div class=\"crack-time-box\">\n      <span class=\"crack-label\">Est. Time to Crack:</span>\n      <span class=\"crack-val\" id=\"crack-time\">Calculating...</span>\n    </div>\n  </div>\n</div>",
  "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.entropy-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 24px;\n    padding: 1.5rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    width: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.btn-icon {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 1.1rem;\n    opacity: 0.6;\n    transition: all 0.2s;\n    padding: 4px;\n    border-radius: 8px;\n}\n.btn-icon:hover { opacity: 1; background: var(--background-modifier-hover); }\n\n.pass-arena {\n    position: relative;\n    background: #0f172a;\n    border-radius: 18px;\n    padding: 1.25rem;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    border: 1px solid rgba(255,255,255,0.05);\n    box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);\n}\n\n.pass-display {\n    flex: 1;\n    position: relative;\n    display: flex;\n    align-items: center;\n}\n\n#pass-out {\n    background: transparent;\n    border: none;\n    color: #38bdf8;\n    font-family: var(--font-monospace);\n    font-size: 1.2rem;\n    font-weight: 700;\n    width: 100%;\n    outline: none;\n    padding: 0;\n    cursor: text;\n}\n\n#pass-out::placeholder {\n    color: rgba(56, 189, 248, 0.3);\n}\n\n.copy-feedback {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    padding: 4px 12px;\n    border-radius: 20px;\n    font-size: 0.7rem;\n    font-weight: 800;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    z-index: 100;\n    white-space: nowrap;\n}\n.copy-feedback.show { opacity: 1; transform: translate(-50%, -120%); }\n\n.refresh-btn {\n    background: rgba(255,255,255,0.1);\n    border: none;\n    color: white;\n    width: 36px;\n    height: 36px;\n    border-radius: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.2rem;\n    transition: all 0.2s;\n}\n.refresh-btn:hover { background: rgba(255,255,255,0.2); transform: rotate(90deg); }\n\n.settings-panel {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.label-row {\n    display: flex;\n    justify-content: space-between;\n    font-size: 0.7rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    margin-bottom: 8px;\n}\n\ninput[type=range] {\n    width: 100%;\n    accent-color: var(--interactive-accent);\n    cursor: pointer;\n}\n\n.options-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n}\n\n.option-check {\n    cursor: pointer;\n    position: relative;\n}\n\n.option-check input {\n    display: none;\n}\n\n.check-label {\n    display: block;\n    text-align: center;\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    padding: 8px 4px;\n    border-radius: 10px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    transition: all 0.2s;\n}\n\n.option-check input:checked + .check-label {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border-color: var(--interactive-accent);\n    box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb), 0.3);\n}\n\n.strength-section {\n    background: rgba(0,0,0,0.05);\n    padding: 1rem;\n    border-radius: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.strength-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n}\n\n.entropy-badge {\n    font-size: 0.65rem;\n    font-weight: 800;\n    background: var(--background-modifier-border);\n    padding: 4px 8px;\n    border-radius: 8px;\n    color: var(--text-muted);\n}\n\n.progress-container {\n    height: 8px;\n    background: var(--background-primary);\n    border-radius: 4px;\n    overflow: hidden;\n    border: 1px solid var(--background-modifier-border);\n}\n\n.progress-fill {\n    height: 100%;\n    width: 0%;\n    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n}\n\n.crack-time-box {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: 8px;\n    border-top: 1px solid var(--background-modifier-border);\n}\n\n.crack-label {\n    font-size: 0.65rem;\n    font-weight: 700;\n    color: var(--text-muted);\n    text-transform: uppercase;\n}\n\n.crack-val {\n    font-size: 0.8rem;\n    font-weight: 800;\n    color: var(--interactive-accent);\n}",
  "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    len: 16,\n    upper: true,\n    lower: true,\n    num: true,\n    sym: true,\n    gpus: 1,\n    password: ''\n};\n\nconst CHARSETS = {\n    upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n    lower: 'abcdefghijklmnopqrstuvwxyz',\n    num: '0123456789',\n    sym: '!@#$%^&*()_+-=[]{}|;:,.<>?'\n};\n\nfunction formatTime(seconds) {\n    if (seconds === Infinity) return 'Infinity';\n    if (seconds < 1) return '< 1 second';\n    \n    const units = [\n        { label: 'centuries', value: 3153600000 },\n        { label: 'years', value: 31536000 },\n        { label: 'months', value: 2592000 },\n        { label: 'days', value: 86400 },\n        { label: 'hours', value: 3600 },\n        { label: 'minutes', value: 60 },\n        { label: 'seconds', value: 1 }\n    ];\n\n    for (const unit of units) {\n        if (seconds >= unit.value) {\n            const count = Math.floor(seconds / unit.value);\n            if (unit.label === 'centuries' && count > 1000) return '> 1000 centuries';\n            return `${count} ${count > 1 ? unit.label : unit.label.slice(0, -1)}`;\n        }\n    }\n    return 'Instant';\n}\n\nfunction analyzePassword(pass, shouldSave = false) {\n    const hasUpper = /[A-Z]/.test(pass);\n    const hasLower = /[a-z]/.test(pass);\n    const hasNum = /[0-9]/.test(pass);\n    const hasSym = /[^A-Za-z0-9]/.test(pass);\n\n    state.len = pass.length;\n    state.upper = hasUpper;\n    state.lower = hasLower;\n    state.num = hasNum;\n    state.sym = hasSym;\n    state.password = pass;\n\n    // Update UI components\n    root.getElementById('len').value = state.len;\n    root.getElementById('len-val').innerText = state.len;\n    root.getElementById('opt-upper').checked = hasUpper;\n    root.getElementById('opt-lower').checked = hasLower;\n    root.getElementById('opt-num').checked = hasNum;\n    root.getElementById('opt-sym').checked = hasSym;\n\n    let poolSize = 0;\n    if (hasUpper) poolSize += CHARSETS.upper.length;\n    if (hasLower) poolSize += CHARSETS.lower.length;\n    if (hasNum) poolSize += CHARSETS.num.length;\n    if (hasSym) poolSize += CHARSETS.sym.length;\n\n    const entropy = poolSize > 0 ? Math.floor(state.len * Math.log2(poolSize)) : 0;\n    updateStrength(entropy, poolSize);\n    if (shouldSave) saveState(state);\n}\n\nfunction generate() {\n    let charset = '';\n    if (state.upper) charset += CHARSETS.upper;\n    if (state.lower) charset += CHARSETS.lower;\n    if (state.num) charset += CHARSETS.num;\n    if (state.sym) charset += CHARSETS.sym;\n\n    if (charset === '') {\n        root.getElementById('pass-out').value = '';\n        updateStrength(0, 0);\n        return;\n    }\n\n    let password = '';\n    const array = new Uint32Array(state.len);\n    crypto.getRandomValues(array);\n\n    for (let i = 0; i < state.len; i++) {\n        password += charset[array[i] % charset.length];\n    }\n\n    state.password = password;\n    root.getElementById('pass-out').value = password;\n    \n    const entropy = Math.floor(state.len * Math.log2(charset.length));\n    updateStrength(entropy, charset.length);\n    saveState(state);\n}\n\nfunction updateStrength(entropy, poolSize) {\n    const valEl = root.getElementById('entropy-val');\n    const labelEl = root.getElementById('strength-label');\n    const barEl = root.getElementById('strength-bar');\n    const crackEl = root.getElementById('crack-time');\n    \n    valEl.innerText = entropy;\n    \n    let label = 'Very Weak';\n    let color = '#ef4444'; // Red\n    let percent = Math.min((entropy / 128) * 100, 100);\n\n    if (entropy >= 100) {\n        label = 'Secure';\n        color = '#10b981'; // Green\n    } else if (entropy >= 80) {\n        label = 'Strong';\n        color = '#34d399'; // Light Green\n    } else if (entropy >= 60) {\n        label = 'Good';\n        color = '#fbbf24'; // Amber\n    } else if (entropy >= 40) {\n        label = 'Weak';\n        color = '#f59e0b'; // Orange\n    }\n\n    if (poolSize === 0 || entropy === 0) {\n        label = 'N/A';\n        percent = 0;\n        crackEl.innerText = 'N/A';\n    } else {\n        const hashesPerSec = state.gpus * 1e11;\n        const totalCombinations = Math.pow(2, entropy);\n        const secondsToCrack = (totalCombinations / 2) / hashesPerSec;\n        crackEl.innerText = formatTime(secondsToCrack);\n    }\n\n    labelEl.innerText = label;\n    labelEl.style.color = color;\n    barEl.style.width = `${percent}%`;\n    barEl.style.background = color;\n}\n\nasync function copyToClipboard() {\n    const pass = root.getElementById('pass-out').value;\n    if (!pass) return;\n\n    try {\n        await navigator.clipboard.writeText(pass);\n        const feedback = root.getElementById('copy-feedback');\n        feedback.classList.add('show');\n        setTimeout(() => feedback.classList.remove('show'), 2000);\n    } catch (err) {\n        console.error('Failed to copy: ', err);\n    }\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) Object.assign(state, saved);\n\n    // Restore UI\n    root.getElementById('len').value = state.len;\n    root.getElementById('len-val').innerText = state.len;\n    root.getElementById('opt-upper').checked = state.upper;\n    root.getElementById('opt-lower').checked = state.lower;\n    root.getElementById('opt-num').checked = state.num;\n    root.getElementById('opt-sym').checked = state.sym;\n    root.getElementById('gpu-count').value = state.gpus || 1;\n    root.getElementById('gpu-val').innerText = state.gpus || 1;\n\n    const passInput = root.getElementById('pass-out');\n    \n    if (state.password) {\n        passInput.value = state.password;\n        analyzePassword(state.password, false);\n    } else {\n        generate();\n    }\n\n    // Event Listeners\n    passInput.oninput = (e) => {\n        analyzePassword(e.target.value, false);\n    };\n\n    passInput.onblur = () => {\n        saveState(state);\n    };\n\n    passInput.onclick = (e) => {\n        if (window.getSelection().toString().length === 0) {\n            copyToClipboard();\n        }\n    };\n\n    root.getElementById('len').oninput = (e) => {\n        state.len = parseInt(e.target.value);\n        root.getElementById('len-val').innerText = state.len;\n        generate();\n    };\n\n    root.getElementById('gpu-count').oninput = (e) => {\n        state.gpus = parseInt(e.target.value);\n        root.getElementById('gpu-val').innerText = state.gpus;\n        analyzePassword(passInput.value, true);\n    };\n\n    ['upper', 'lower', 'num', 'sym'].forEach(opt => {\n        root.getElementById(`opt-${opt}`).onchange = (e) => {\n            state[opt] = e.target.checked;\n            generate();\n        };\n    });\n\n    root.getElementById('btn-refresh').onclick = generate;\n    root.getElementById('btn-copy').onclick = copyToClipboard;\n}\n\ninit();",
  "tags": [
    "security",
    "passwords",
    "tools",
    "premium",
    "utility"
  ]
}