{
    "id": "file-api-tester",
    "name": "File API Tester",
    "description": "Test the Obsidian-obsidget file API methods.",
    "author": "Infinition",
    "authorUrl": "https://github.com/infinition",
    "html": "<div class=\"api-tester\">\n  <h4>ðŸ“‚ File API Tester Pro</h4>\n  \n  <div class=\"section\">\n    <label>1. Search & Select File:</label>\n    <div class=\"search-row\">\n      <input type=\"text\" id=\"file-search\" list=\"file-datalist\" placeholder=\"Search any file (log, xml, md...)\" onchange=\"handleFileChange()\">\n      <datalist id=\"file-datalist\"></datalist>\n      <button onclick=\"refreshFiles()\" class=\"mini-btn\">ðŸ”„</button>\n    </div>\n  </div>\n\n  <div class=\"section\">\n    <div class=\"preview-header\">\n      <label>2. Editor:</label>\n      <div class=\"header-actions\">\n        <button onclick=\"saveChanges()\" class=\"save-btn\">ðŸ’¾ Save</button>\n      </div>\n    </div>\n    <textarea id=\"editor-box\" placeholder=\"Select a file to edit content...\"></textarea>\n  </div>\n\n  <div class=\"section\">\n    <label>3. Quick Log Configuration:</label>\n    <div class=\"log-config-row\">\n      <input type=\"text\" id=\"log-path\" list=\"log-datalist\" placeholder=\"Log file path (e.g. logs/daily.log)\" onchange=\"saveLocalState()\">\n      <datalist id=\"log-datalist\"></datalist>\n    </div>\n    <div class=\"log-row\">\n      <input type=\"text\" id=\"log-input\" placeholder=\"Message to append...\">\n      <button onclick=\"appendLog()\">âž• Append</button>\n    </div>\n  </div>\n\n  <div id=\"status-bar\" class=\"status\">Ready</div>\n</div>",
    "css": ".api-tester {\n  background: var(--background-secondary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 12px;\n  padding: 15px;\n  color: var(--text-normal);\n  font-family: var(--font-interface);\n}\n.section {\n  margin-bottom: 15px;\n}\nlabel {\n  display: block;\n  font-size: 0.7rem;\n  font-weight: 700;\n  margin-bottom: 5px;\n  color: var(--text-muted);\n  text-transform: uppercase;\n}\n.search-row, .log-row, .log-config-row {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 5px;\n}\n.preview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 5px;\n}\n#file-search, #log-path, #log-input, #editor-box {\n  width: 100%;\n  background: var(--background-primary);\n  color: var(--text-normal);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 6px;\n  padding: 8px;\n  font-size: 0.85rem;\n  outline: none;\n}\n#file-search:focus, #log-path:focus, #log-input:focus, #editor-box:focus {\n  border-color: var(--interactive-accent);\n}\n#editor-box {\n  height: 180px;\n  font-family: var(--font-monospace);\n  font-size: 0.8rem;\n  resize: vertical;\n  color: var(--text-accent);\n}\nbutton {\n  background: var(--interactive-accent);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 8px 12px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.8rem;\n  white-space: nowrap;\n}\n.mini-btn {\n  padding: 8px;\n  background: var(--background-primary);\n  border: 1px solid var(--background-modifier-border);\n}\n.save-btn {\n  background: var(--background-modifier-success);\n  padding: 4px 10px;\n  font-size: 0.75rem;\n}\n.status {\n  font-size: 0.65rem;\n  color: var(--text-muted);\n  margin-top: 10px;\n  font-style: italic;\n  border-top: 1px solid var(--background-modifier-border);\n  padding-top: 8px;\n}",
    "js": "const TEXT_EXTENSIONS = ['json', 'csv', 'log', 'xml', 'txt', 'md', 'yaml', 'yml', 'css', 'js', 'ts'];\n\nasync function saveLocalState() {\n  const mainPath = root.getElementById('file-search').value;\n  const logPath = root.getElementById('log-path').value;\n  await api.saveState({ mainPath, logPath });\n}\n\nasync function refreshFiles() {\n  const allFiles = api.getFiles();\n  const files = allFiles.filter(f => {\n    const ext = f.split('.').pop().toLowerCase();\n    return TEXT_EXTENSIONS.includes(ext);\n  });\n\n  const fileDatalist = root.getElementById('file-datalist');\n  const logDatalist = root.getElementById('log-datalist');\n  \n  fileDatalist.innerHTML = '';\n  logDatalist.innerHTML = '';\n  \n  files.forEach(f => {\n    const opt = document.createElement('option');\n    opt.value = f;\n    fileDatalist.appendChild(opt.cloneNode(true));\n    logDatalist.appendChild(opt);\n  });\n  setStatus(\"File lists updated (\" + files.length + \" files)\");\n  await readSelectedFile();\n}\n\nasync function handleFileChange() {\n  const path = root.getElementById('file-search').value;\n  if (!path || !path.includes('.')) return;\n  \n  await saveLocalState();\n  await readSelectedFile();\n}\n\nasync function readSelectedFile() {\n  const path = root.getElementById('file-search').value;\n  const editor = root.getElementById('editor-box');\n  \n  if (!path || !path.includes('.')) return;\n  \n  setStatus(\"Reading \" + path + \"...\");\n  const content = await api.readFile(path);\n  \n  if (content === null) {\n    setStatus(\"File not found\");\n    editor.value = \"\";\n    return;\n  }\n\n  editor.value = content;\n  setStatus(\"Loaded: \" + path);\n}\n\nasync function saveChanges() {\n  const path = root.getElementById('file-search').value;\n  const content = root.getElementById('editor-box').value;\n  \n  if (!path) {\n    new Notice(\"Please select a file first\");\n    return;\n  }\n\n  setStatus(\"Saving \" + path + \"...\");\n  await api.writeFile(path, content);\n  new Notice(\"File saved successfully!\");\n  setStatus(\"Saved: \" + path);\n}\n\nasync function appendLog() {\n  const logPath = root.getElementById('log-path').value || \"log.txt\";\n  const msg = root.getElementById('log-input').value;\n  \n  if (!msg) return;\n  \n  setStatus(\"Appending to \" + logPath + \"...\");\n  \n  let currentLog = await api.readFile(logPath) || \"\";\n  const newLog = currentLog + (currentLog ? \"\\n\" : \"\") + \"[\" + new Date().toLocaleString() + \"] \" + msg;\n  \n  await api.writeFile(logPath, newLog);\n  root.getElementById('log-input').value = \"\";\n  setStatus(\"Log updated in \" + logPath);\n  \n  if (root.getElementById('file-search').value === logPath) {\n    readSelectedFile();\n  }\n}\n\nfunction setStatus(msg) {\n  root.getElementById('status-bar').innerText = msg;\n}\n\nasync function init() {\n  refreshFiles();\n  const saved = await api.getState();\n  if (saved) {\n    if (saved.mainPath) {\n      root.getElementById('file-search').value = saved.mainPath;\n      readSelectedFile();\n    }\n    if (saved.logPath) {\n      root.getElementById('log-path').value = saved.logPath;\n    }\n  }\n}\n\ninit();",
    "tags": [
        "test",
        "api",
        "files",
        "editor",
        "search",
        "log",
        "persistence",
        "all-files"
    ]
}