{
  "id": "step-studio",
  "name": "Step Studio",
  "description": "Track your daily steps and set fitness goals.",
  "author": "Infinition",
  "authorUrl": "https://github.com/infinition",
  "html": "<div class=\"widget-card\">\n  <div class=\"widget-header\">\n    <h4 class=\"widget-title\">üëü Step Studio Pro</h4>\n    <div class=\"header-actions\">\n      <button id=\"btn-view-toggle\" class=\"btn-icon-small\" title=\"Toggle Graph/List\">üìä</button>\n      <button id=\"btn-reset\" class=\"btn-icon-small\" title=\"Clear All Data\">üóëÔ∏è</button>\n    </div>\n  </div>\n\n  <div class=\"main-progress\">\n    <svg class=\"progress-ring\" width=\"160\" height=\"160\">\n      <circle class=\"progress-ring-bg\" stroke=\"rgba(251, 191, 36, 0.1)\" stroke-width=\"12\" fill=\"transparent\" r=\"70\" cx=\"80\" cy=\"80\"/>\n      <circle id=\"progress-bar\" class=\"progress-ring-fill\" stroke=\"#fbbf24\" stroke-width=\"12\" stroke-dasharray=\"440 440\" stroke-dashoffset=\"440\" stroke-linecap=\"round\" fill=\"transparent\" r=\"70\" cx=\"80\" cy=\"80\"/>\n    </svg>\n    <div class=\"progress-content\">\n      <div id=\"step-count\" class=\"step-value\">0</div>\n      <div class=\"step-label\">Steps</div>\n      <div id=\"step-goal-text\" class=\"goal-label\">Goal: 10,000</div>\n    </div>\n  </div>\n\n  <div class=\"stats-grid\">\n    <div class=\"stat-box\">\n      <span id=\"stat-calories\" class=\"stat-val\">0</span>\n      <label>kcal</label>\n    </div>\n    <div class=\"stat-box\">\n      <span id=\"stat-distance\" class=\"stat-val\">0.0</span>\n      <label>km</label>\n    </div>\n    <div class=\"stat-box\">\n      <span id=\"stat-avg\" class=\"stat-val\">0</span>\n      <label>Avg</label>\n    </div>\n  </div>\n\n  <div class=\"input-card\">\n    <div class=\"slider-group\">\n      <div class=\"slider-header\">\n        <label>Add Steps</label>\n        <span id=\"val-add\" class=\"slider-val\">+1,000</span>\n      </div>\n      <input type=\"range\" id=\"input-add\" min=\"0\" max=\"5000\" step=\"100\" value=\"1000\" class=\"modern-slider\">\n    </div>\n    <div class=\"control-buttons\">\n      <button class=\"btn-log\" id=\"btn-log\">Add Steps ‚ú®</button>\n      <button class=\"btn-secondary\" id=\"btn-set-goal\">Set Goal üéØ</button>\n    </div>\n  </div>\n\n  <div id=\"view-list\" class=\"view-container active\">\n    <div class=\"section-label\">Recent Activity (Drag to scroll, click to edit)</div>\n    <div class=\"history-list\" id=\"step-history\"></div>\n  </div>\n\n  <div id=\"view-graph\" class=\"view-container\">\n    <div class=\"section-label\">Activity Trends</div>\n    <div class=\"graph-wrapper\">\n      <svg id=\"step-graph\" viewBox=\"0 0 300 120\" preserveAspectRatio=\"none\"></svg>\n      <div class=\"graph-labels\">\n        <button id=\"btn-graph-range\" class=\"btn-range-toggle\">30 days</button>\n        <span>Today</span>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"toast-msg\" class=\"toast-msg\"></div>\n</div>",
  "css": ":host { display: block; margin: 1.5rem 0; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.widget-card {\n    background: var(--background-secondary);\n    color: var(--text-normal);\n    border-radius: 28px;\n    padding: 1.5rem;\n    box-shadow: var(--shadow-s);\n    border: 1px solid var(--background-modifier-border);\n    max-width: 360px;\n    margin: 0 auto;\n    position: relative;\n    overflow: hidden;\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 800;\n    color: #fbbf24;\n    text-transform: uppercase;\n    letter-spacing: 1.5px;\n}\n\n.header-actions { display: flex; gap: 8px; }\n\n.btn-icon-small {\n    background: rgba(255, 255, 255, 0.05);\n    border: none;\n    color: #fde68a;\n    width: 32px;\n    height: 32px;\n    border-radius: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s;\n}\n.btn-icon-small:hover { background: rgba(251, 191, 36, 0.2); color: white; }\n\n.main-progress {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.progress-ring {\n    transform: rotate(-90deg);\n}\n\n.progress-ring-fill {\n    transition: stroke-dashoffset 0.5s ease;\n    filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.4));\n}\n\n.progress-content {\n    position: absolute;\n    text-align: center;\n}\n\n.step-value {\n    font-size: 2.2rem;\n    font-weight: 900;\n    color: #fbbf24;\n    line-height: 1;\n}\n\n.step-label {\n    font-size: 0.7rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    color: #fde68a;\n    opacity: 0.6;\n    margin-top: 4px;\n}\n\n.goal-label {\n    font-size: 0.6rem;\n    font-weight: 700;\n    color: #94a3b8;\n    margin-top: 2px;\n}\n\n.stats-grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 10px;\n    margin-bottom: 1.5rem;\n}\n\n.stat-box {\n    background: rgba(255, 255, 255, 0.03);\n    padding: 12px 8px;\n    border-radius: 16px;\n    text-align: center;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.stat-val {\n    display: block;\n    font-size: 1.1rem;\n    font-weight: 800;\n    color: #fbbf24;\n}\n\n.stat-box label {\n    font-size: 0.55rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    color: #94a3b8;\n}\n\n.input-card {\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 20px;\n    padding: 1.25rem;\n    margin-bottom: 1.5rem;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.slider-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n}\n\n.slider-header label {\n    font-size: 0.7rem;\n    font-weight: 700;\n    color: #fde68a;\n    text-transform: uppercase;\n}\n\n.slider-val {\n    font-size: 0.9rem;\n    font-weight: 800;\n    color: #fbbf24;\n}\n\n.modern-slider {\n    -webkit-appearance: none;\n    width: 100%;\n    height: 6px;\n    background: #0f172a;\n    border-radius: 10px;\n    outline: none;\n    margin-bottom: 1rem;\n}\n\n.modern-slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 18px;\n    height: 18px;\n    background: #fbbf24;\n    border-radius: 50%;\n    cursor: pointer;\n    box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);\n}\n\n.control-buttons {\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    gap: 8px;\n}\n\n.btn-log {\n    background: linear-gradient(135deg, #fbbf24, #f59e0b);\n    color: #451a03;\n    border: none;\n    padding: 10px;\n    border-radius: 12px;\n    font-weight: 800;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n.btn-log:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4); }\n\n.btn-secondary {\n    background: rgba(255, 255, 255, 0.05);\n    color: #fde68a;\n    border: 1px solid rgba(251, 191, 36, 0.2);\n    padding: 10px;\n    border-radius: 12px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    cursor: pointer;\n}\n\n.view-container { display: none; }\n.view-container.active { display: block; }\n\n.section-label {\n    font-size: 0.65rem;\n    font-weight: 800;\n    text-transform: uppercase;\n    color: #94a3b8;\n    margin-bottom: 10px;\n    letter-spacing: 1px;\n}\n\n.history-list {\n    display: flex;\n    gap: 8px;\n    overflow-x: auto;\n    padding-bottom: 8px;\n    scrollbar-width: none;\n    cursor: grab;\n    user-select: none;\n}\n.history-list:active { cursor: grabbing; }\n.history-list::-webkit-scrollbar { display: none; }\n\n.history-item {\n    background: rgba(255, 255, 255, 0.03);\n    padding: 10px;\n    border-radius: 14px;\n    min-width: 75px;\n    text-align: center;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n    transition: transform 0.2s, background 0.2s;\n}\n.history-item:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-2px); }\n\n.h-val { display: block; font-weight: 800; font-size: 1rem; color: #fbbf24; pointer-events: none; }\n.h-date { font-size: 0.55rem; font-weight: 700; color: #94a3b8; text-transform: uppercase; pointer-events: none; }\n\n.graph-wrapper {\n    background: rgba(0,0,0,0.2);\n    border-radius: 16px;\n    padding: 12px;\n    border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n#step-graph {\n    width: 100%;\n    height: 100px;\n}\n\n.graph-labels {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 8px;\n    font-size: 0.6rem;\n    color: #94a3b8;\n    font-weight: 700;\n    text-transform: uppercase;\n}\n\n.btn-range-toggle {\n    background: rgba(251, 191, 36, 0.1);\n    border: 1px solid rgba(251, 191, 36, 0.2);\n    color: #fbbf24;\n    padding: 2px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.6rem;\n    font-weight: 800;\n    text-transform: uppercase;\n}\n\n.toast-msg {\n    position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);\n    background: #fbbf24; color: #451a03; padding: 8px 16px; border-radius: 100px;\n    font-size: 0.75rem; font-weight: 700; opacity: 0; transition: opacity 0.3s;\n    pointer-events: none; z-index: 100;\n}",
  "js": "const { root, saveState, getState } = api;\n\nconst RANGES = [\n    { label: '7 days', val: 7 },\n    { label: '30 days', val: 30 },\n    { label: '3 months', val: 90 },\n    { label: '6 months', val: 180 },\n    { label: '1 year', val: 365 }\n];\n\nlet state = {\n    history: [],\n    goal: 10000,\n    view: 'list',\n    rangeIdx: 1,\n    editingDate: null\n};\n\nfunction showToast(msg) {\n    const toast = root.querySelector('#toast-msg');\n    if (!toast) return;\n    toast.innerText = msg; toast.style.opacity = '1';\n    setTimeout(() => { toast.style.opacity = '0'; }, 2000);\n}\n\nfunction render() {\n    const todayData = state.history[0] || { steps: 0, date: '' };\n    const steps = todayData.steps;\n    \n    const circle = root.querySelector('#progress-bar');\n    const radius = 70;\n    const circumference = 2 * Math.PI * radius;\n    const offset = circumference - (Math.min(steps / state.goal, 1.2) * circumference);\n    circle.style.strokeDashoffset = offset;\n    \n    root.querySelector('#step-count').innerText = steps.toLocaleString();\n    root.querySelector('#step-goal-text').innerText = `Goal: ${state.goal.toLocaleString()}`;\n    \n    const calories = Math.round(steps * 0.04);\n    const distance = (steps * 0.00076).toFixed(1);\n    let totalAll = 0;\n    state.history.forEach(h => totalAll += h.steps);\n    const avg = state.history.length > 0 ? Math.round(totalAll / state.history.length) : 0;\n    \n    root.querySelector('#stat-calories').innerText = calories.toLocaleString();\n    root.querySelector('#stat-distance').innerText = distance;\n    root.querySelector('#stat-avg').innerText = avg.toLocaleString();\n\n    const list = root.querySelector('#step-history');\n    list.innerHTML = '';\n    state.history.forEach((item, idx) => {\n        const el = document.createElement('div');\n        el.className = 'history-item';\n        el.innerHTML = `\n            <span class=\"h-val\">${item.steps.toLocaleString()}</span>\n            <span class=\"h-date\">${item.date}</span>\n        `;\n        el.onclick = () => editEntry(idx);\n        list.appendChild(el);\n    });\n\n    renderGraph();\n\n    root.querySelector('#view-list').className = 'view-container' + (state.view === 'list' ? ' active' : '');\n    root.querySelector('#view-graph').className = 'view-container' + (state.view === 'graph' ? ' active' : '');\n    root.querySelector('#btn-view-toggle').innerText = state.view === 'list' ? 'üìä' : 'üìú';\n    root.querySelector('#btn-graph-range').innerText = RANGES[state.rangeIdx].label;\n    \n    const logBtn = root.querySelector('#btn-log');\n    logBtn.innerText = state.editingDate ? `Update ${state.editingDate} ‚ú®` : 'Add Steps ‚ú®';\n}\n\nfunction editEntry(idx) {\n    const item = state.history[idx];\n    state.editingDate = item.date;\n    const input = root.querySelector('#input-add');\n    input.value = item.steps > 5000 ? 5000 : item.steps;\n    root.querySelector('#val-add').innerText = '+' + item.steps.toLocaleString();\n    showToast(`Editing steps for ${item.date} ‚úèÔ∏è`);\n    render();\n}\n\nfunction renderGraph() {\n    const svg = root.querySelector('#step-graph');\n    if (!svg) return;\n    if (state.history.length < 2) {\n        svg.innerHTML = '<text x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"#94a3b8\" font-size=\"10\">Need more data...</text>';\n        return;\n    }\n    const range = RANGES[state.rangeIdx].val;\n    const data = state.history.slice(0, range).reverse();\n    const maxSteps = Math.max(...data.map(d => d.steps), state.goal) * 1.1;\n    const width = 300, height = 120, padding = 10;\n    let points = '';\n    data.forEach((item, i) => {\n        const x = (i / (data.length - 1)) * (width - padding * 2) + padding;\n        const y = height - ((item.steps / maxSteps) * (height - padding * 2)) - padding;\n        points += `${x},${y} `;\n    });\n    svg.innerHTML = `\n        <defs>\n            <linearGradient id=\"grad-steps\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                <stop offset=\"0%\" style=\"stop-color:#fbbf24;stop-opacity:0.3\" />\n                <stop offset=\"100%\" style=\"stop-color:#fbbf24;stop-opacity:0\" />\n            </linearGradient>\n        </defs>\n        <polyline points=\"${points}\" fill=\"none\" stroke=\"#fbbf24\" stroke-width=\"${range > 100 ? 1 : 2}\" />\n        <path d=\"M ${padding},${height} L ${points} L ${width-padding},${height} Z\" fill=\"url(#grad-steps)\" />\n    `;\n}\n\nfunction addSteps() {\n    const amount = parseInt(root.querySelector('#input-add').value);\n    const date = state.editingDate || new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    const existingIdx = state.history.findIndex(h => h.date === date);\n    if (existingIdx !== -1) {\n        if (state.editingDate) state.history[existingIdx].steps = amount;\n        else state.history[existingIdx].steps += amount;\n    } else {\n        state.history.unshift({ steps: amount, date: date });\n    }\n    if (state.history.length > 365) state.history.pop();\n    state.editingDate = null;\n    saveState(state);\n    render();\n    showToast('Steps saved! üëü');\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) state = Object.assign(state, saved);\n\n    root.querySelector('#input-add').oninput = (e) => {\n        root.querySelector('#val-add').innerText = '+' + parseInt(e.target.value).toLocaleString();\n    };\n    root.querySelector('#btn-log').onclick = addSteps;\n    root.querySelector('#btn-set-goal').onclick = () => {\n        const currentGoal = state.goal;\n        const newGoal = window.prompt('Enter your daily step goal:', currentGoal);\n        if (newGoal !== null && newGoal !== '' && !isNaN(newGoal)) {\n            const goalNum = parseInt(newGoal);\n            if (goalNum > 0) {\n                state.goal = goalNum;\n                showToast(`Goal set to ${goalNum.toLocaleString()}! üéØ`);\n                render();\n                saveState(state);\n            }\n        }\n    };\n    root.querySelector('#btn-view-toggle').onclick = () => {\n        state.view = state.view === 'list' ? 'graph' : 'list';\n        render();\n        saveState(state);\n    };\n    root.querySelector('#btn-graph-range').onclick = () => {\n        state.rangeIdx = (state.rangeIdx + 1) % RANGES.length;\n        render();\n        saveState(state);\n    };\n    root.querySelector('#btn-reset').onclick = () => {\n        if (confirm('Clear all step data?')) {\n            state.history = [];\n            render();\n            saveState(state);\n            showToast('Data cleared üóëÔ∏è');\n        }\n    };\n\n    const list = root.querySelector('#step-history');\n    let isDown = false, startX, scrollLeft;\n    list.onmousedown = (e) => {\n        isDown = true;\n        startX = e.pageX - list.offsetLeft;\n        scrollLeft = list.scrollLeft;\n    };\n    list.onmouseleave = () => isDown = false;\n    list.onmouseup = () => isDown = false;\n    list.onmousemove = (e) => {\n        if (!isDown) return;\n        e.preventDefault();\n        const x = e.pageX - list.offsetLeft;\n        const walk = (x - startX) * 2;\n        list.scrollLeft = scrollLeft - walk;\n    };\n\n    render();\n}\n\ninit();",
  "Complexity": 3,
  "Description": "Fix corrupted step-counter.json and update background to Obsidian theme.",
  "EmptyFile": false,
  "Overwrite": true,
  "TargetFile": "c:\\Users\\Nephystos\\iCloudDrive\\iCloud~md~obsidian\\Infinition\\.obsidian\\plugins\\obsidian-obsidget\\gallery\\step-counter.json"
}