{
    "id": "dynamic-table",
    "name": "Table Studio Pro",
    "description": "Create and manage dynamic tables with ease.",
    "author": "Infinition",
    "authorUrl": "https://github.com/infinition",
    "html": "<div class=\"table-widget\">\n  <div class=\"widget-header\">\n    <div class=\"header-main\">\n      <h4 class=\"widget-title\">üìä Table Studio Pro</h4>\n      <div class=\"header-actions\">\n        <button class=\"btn-edit\" id=\"btn-edit-toggle\">Edit</button>\n        <div class=\"edit-controls-group\" id=\"edit-controls-group\" style=\"display: none;\">\n          <button class=\"btn-icon\" id=\"btn-paste\" title=\"Paste CSV from Clipboard\">üì•</button>\n          <button class=\"btn-icon\" id=\"btn-copy\" title=\"Copy as CSV\">üìã</button>\n          <button class=\"btn-icon\" id=\"btn-reset\" title=\"Reset Table\">üóëÔ∏è</button>\n        </div>\n      </div>\n    </div>\n    <div class=\"controls\" id=\"main-controls\" style=\"display: none;\">\n      <button class=\"btn-primary\" id=\"btn-add-row\">+ Add Row</button>\n      <button class=\"btn-primary\" id=\"btn-add-col\">+ Add Column</button>\n    </div>\n  </div>\n\n  <div class=\"table-container\">\n    <div class=\"table-scroll\">\n      <table id=\"main-table\">\n        <thead id=\"table-head\"></thead>\n        <tbody id=\"table-body\"></tbody>\n      </table>\n    </div>\n  </div>\n\n  <div class=\"table-footer\">\n    <span class=\"stats\" id=\"table-stats\">0 Rows ‚Ä¢ 0 Columns</span>\n  </div>\n\n  <div id=\"toast\" class=\"toast\">Copied to clipboard!</div>\n</div>",
    "css": ":host { display: block; font-family: var(--font-interface); }\n* { box-sizing: border-box; }\n\n.table-widget {\n    background: var(--background-secondary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 20px;\n    padding: 1.25rem;\n    color: var(--text-normal);\n    box-shadow: var(--shadow-s);\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    max-width: 100%;\n}\n\n.widget-header {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.header-main {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.widget-title {\n    margin: 0;\n    font-size: 0.85rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.1em;\n    color: var(--text-muted);\n}\n\n.header-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.btn-icon {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    font-size: 0.9rem;\n    transition: all 0.2s;\n}\n.btn-icon:hover { background: var(--background-modifier-hover); transform: translateY(-1px); }\n\n.btn-edit {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    padding: 4px 12px;\n    font-size: 0.7rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    cursor: pointer;\n    color: var(--text-muted);\n    transition: all 0.2s;\n}\n.btn-edit.active {\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border-color: var(--interactive-accent);\n}\n\n.edit-controls-group {\n    display: flex;\n    gap: 8px;\n    animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateX(10px); }\n    to { opacity: 1; transform: translateX(0); }\n}\n\n.controls {\n    display: flex;\n    gap: 10px;\n    animation: slideDown 0.2s ease;\n}\n\n@keyframes slideDown {\n    from { opacity: 0; transform: translateY(-10px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.btn-primary {\n    flex: 1;\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    border: none;\n    padding: 8px 12px;\n    border-radius: 10px;\n    font-size: 0.75rem;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n.btn-primary:hover { filter: brightness(1.1); transform: translateY(-1px); }\n.btn-primary:active { transform: translateY(0); }\n\n.table-container {\n    background: var(--background-primary);\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 12px;\n    overflow: hidden;\n    position: relative;\n}\n\n.table-scroll {\n    overflow-x: auto;\n    max-height: 400px;\n    overflow-y: auto;\n}\n\ntable {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: 0.85rem;\n}\n\nth {\n    position: sticky;\n    top: 0;\n    background: var(--background-secondary-alt);\n    z-index: 10;\n    border-bottom: 2px solid var(--background-modifier-border);\n    padding: 0;\n}\n\ntd {\n    border-bottom: 1px solid var(--background-modifier-border);\n    border-right: 1px solid var(--background-modifier-border);\n    padding: 0;\n}\ntd:last-child { border-right: none; }\n\n.cell-input {\n    width: 100%;\n    border: none;\n    background: transparent;\n    color: var(--text-normal);\n    padding: 10px 12px;\n    outline: none;\n    font-size: 0.85rem;\n    transition: background 0.2s;\n}\n.cell-input:focus {\n    background: var(--background-modifier-hover);\n    box-shadow: inset 0 0 0 1px var(--interactive-accent);\n}\n\n.header-cell {\n    display: flex;\n    align-items: center;\n}\n\n.btn-del-col, .btn-del-row {\n    background: transparent;\n    border: none;\n    color: var(--text-error);\n    opacity: 0.3;\n    cursor: pointer;\n    padding: 4px;\n    font-size: 0.7rem;\n    transition: opacity 0.2s;\n}\n.btn-del-col:hover, .btn-del-row:hover { opacity: 1; }\n\n.row-header {\n    width: 30px;\n    background: var(--background-secondary-alt);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: width 0.2s;\n}\n\n.table-widget:not(.is-editing) .row-header {\n    width: 0;\n    overflow: hidden;\n    border: none;\n}\n\n.table-widget:not(.is-editing) .btn-del-col {\n    display: none;\n}\n\n.table-footer {\n    display: flex;\n    justify-content: flex-end;\n    padding: 0 4px;\n}\n\n.stats {\n    font-size: 0.65rem;\n    font-weight: 600;\n    color: var(--text-muted);\n    text-transform: uppercase;\n}\n\n.toast {\n    position: absolute;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%) translateY(100px);\n    background: var(--interactive-accent);\n    color: var(--text-on-accent);\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    z-index: 100;\n    box-shadow: var(--shadow-l);\n}\n.toast.show { transform: translateX(-50%) translateY(0); }",
    "js": "const { root, saveState, getState } = api;\n\nlet state = {\n    tableData: [\n        ['Header 1', 'Header 2', 'Header 3'],\n        ['Data 1', 'Data 2', 'Data 3'],\n        ['Data 4', 'Data 5', 'Data 6']\n    ],\n    isEditing: false\n};\n\nfunction render() {\n    const widget = root.querySelector('.table-widget');\n    const editBtn = root.getElementById('btn-edit-toggle');\n    const editGroup = root.getElementById('edit-controls-group');\n    const mainControls = root.getElementById('main-controls');\n\n    if (state.isEditing) {\n        widget.classList.add('is-editing');\n        if (editBtn) { editBtn.classList.add('active'); editBtn.innerText = 'Done'; }\n        if (editGroup) editGroup.style.display = 'flex';\n        if (mainControls) mainControls.style.display = 'flex';\n    } else {\n        widget.classList.remove('is-editing');\n        if (editBtn) { editBtn.classList.remove('active'); editBtn.innerText = 'Edit'; }\n        if (editGroup) editGroup.style.display = 'none';\n        if (mainControls) mainControls.style.display = 'none';\n    }\n\n    const thead = root.getElementById('table-head');\n    const tbody = root.getElementById('table-body');\n    const stats = root.getElementById('table-stats');\n    \n    if (!thead || !tbody) return;\n\n    thead.innerHTML = '';\n    tbody.innerHTML = '';\n\n    // Render Header\n    const headerRow = document.createElement('tr');\n    const corner = document.createElement('th');\n    corner.className = 'row-header';\n    headerRow.appendChild(corner);\n\n    state.tableData[0].forEach((colName, colIdx) => {\n        const th = document.createElement('th');\n        const container = document.createElement('div');\n        container.className = 'header-cell';\n        \n        const input = document.createElement('input');\n        input.className = 'cell-input';\n        input.style.fontWeight = '700';\n        input.value = colName;\n        input.oninput = (e) => { state.tableData[0][colIdx] = e.target.value; };\n        input.onblur = () => { save(); };\n\n        const delBtn = document.createElement('button');\n        delBtn.className = 'btn-del-col';\n        delBtn.innerHTML = '√ó';\n        delBtn.onclick = () => deleteColumn(colIdx);\n\n        container.appendChild(input);\n        container.appendChild(delBtn);\n        th.appendChild(container);\n        headerRow.appendChild(th);\n    });\n    thead.appendChild(headerRow);\n\n    // Render Body\n    for (let r = 1; r < state.tableData.length; r++) {\n        const tr = document.createElement('tr');\n        const rowAction = document.createElement('td');\n        rowAction.className = 'row-header';\n        const delRowBtn = document.createElement('button');\n        delRowBtn.className = 'btn-del-row';\n        delRowBtn.innerHTML = '√ó';\n        delRowBtn.onclick = () => deleteRow(r);\n        rowAction.appendChild(delRowBtn);\n        tr.appendChild(rowAction);\n\n        state.tableData[r].forEach((cellData, cIdx) => {\n            const td = document.createElement('td');\n            const input = document.createElement('input');\n            input.className = 'cell-input';\n            input.value = cellData;\n            input.oninput = (e) => { state.tableData[r][cIdx] = e.target.value; };\n            input.onblur = () => { save(); };\n            td.appendChild(input);\n            tr.appendChild(td);\n        });\n        tbody.appendChild(tr);\n    }\n\n    if (stats) {\n        stats.innerText = `${state.tableData.length - 1} Rows ‚Ä¢ ${state.tableData[0].length} Columns`;\n    }\n}\n\nfunction addRow() {\n    const newRow = new Array(state.tableData[0].length).fill('');\n    state.tableData.push(newRow);\n    render();\n    save();\n}\n\nfunction addColumn() {\n    state.tableData.forEach((row, idx) => {\n        row.push(idx === 0 ? `Header ${row.length + 1}` : '');\n    });\n    render();\n    save();\n}\n\nfunction deleteRow(idx) {\n    if (state.tableData.length <= 2) return;\n    state.tableData.splice(idx, 1);\n    render();\n    save();\n}\n\nfunction deleteColumn(idx) {\n    if (state.tableData[0].length <= 1) return;\n    state.tableData.forEach(row => row.splice(idx, 1));\n    render();\n    save();\n}\n\nfunction resetTable() {\n    if (confirm('Reset table to default?')) {\n        state.tableData = [\n            ['Header 1', 'Header 2', 'Header 3'],\n            ['', '', ''],\n            ['', '', '']\n        ];\n        render();\n        save();\n    }\n}\n\nfunction copyAsCSV() {\n    const csv = state.tableData.map(row => \n        row.map(cell => `\"${cell.replace(/\"/g, '\"\"')}\"`).join(',')\n    ).join('\\n');\n    \n    navigator.clipboard.writeText(csv).then(() => {\n        showToast('Copied to clipboard!');\n    });\n}\n\nasync function pasteFromCSV() {\n    try {\n        const text = await navigator.clipboard.readText();\n        if (!text) return;\n\n        const rows = [];\n        let currentRow = [];\n        let currentCell = '';\n        let inQuotes = false;\n\n        for (let i = 0; i < text.length; i++) {\n            const char = text[i];\n            const nextChar = text[i+1];\n\n            if (char === '\"' && inQuotes && nextChar === '\"') {\n                currentCell += '\"';\n                i++;\n            } else if (char === '\"') {\n                inQuotes = !inQuotes;\n            } else if (char === ',' && !inQuotes) {\n                currentRow.push(currentCell.trim());\n                currentCell = '';\n            } else if ((char === '\\n' || char === '\\r') && !inQuotes) {\n                if (char === '\\r' && nextChar === '\\n') i++;\n                currentRow.push(currentCell.trim());\n                rows.push(currentRow);\n                currentRow = [];\n                currentCell = '';\n            } else {\n                currentCell += char;\n            }\n        }\n        if (currentCell || currentRow.length > 0) {\n            currentRow.push(currentCell.trim());\n            rows.push(currentRow);\n        }\n\n        if (rows.length > 0) {\n            state.tableData = rows;\n            render();\n            save();\n            showToast('Table updated from CSV!');\n        }\n    } catch (err) {\n        console.error('Failed to read clipboard:', err);\n        alert('Could not read clipboard. Please ensure you have granted permission.');\n    }\n}\n\nfunction showToast(msg) {\n    const toast = root.getElementById('toast');\n    if (toast) {\n        toast.innerText = msg;\n        toast.classList.add('show');\n        setTimeout(() => toast.classList.remove('show'), 2000);\n    }\n}\n\nfunction save() {\n    saveState(state);\n}\n\nfunction toggleEdit() {\n    state.isEditing = !state.isEditing;\n    render();\n    save();\n}\n\nasync function init() {\n    const saved = await getState();\n    if (saved) {\n        if (Array.isArray(saved)) {\n            state.tableData = saved;\n        } else {\n            Object.assign(state, saved);\n        }\n    }\n\n    const btnAddRow = root.getElementById('btn-add-row');\n    const btnAddCol = root.getElementById('btn-add-col');\n    const btnReset = root.getElementById('btn-reset');\n    const btnCopy = root.getElementById('btn-copy');\n    const btnPaste = root.getElementById('btn-paste');\n    const btnEdit = root.getElementById('btn-edit-toggle');\n\n    if (btnAddRow) btnAddRow.onclick = addRow;\n    if (btnAddCol) btnAddCol.onclick = addColumn;\n    if (btnReset) btnReset.onclick = resetTable;\n    if (btnCopy) btnCopy.onclick = copyAsCSV;\n    if (btnPaste) btnPaste.onclick = pasteFromCSV;\n    if (btnEdit) btnEdit.onclick = toggleEdit;\n\n    render();\n}\n\ninit();",
    "tags": [
        "data",
        "table",
        "organization",
        "productivity",
        "premium"
    ]
}